(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activity/waterfull/imglist"],{"55ff":function(t,e,i){"use strict";i.r(e);var s=i("6033"),n=i.n(s);for(var r in s)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(r);e["default"]=n.a},"5a0c":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var s=function(){var t=this.$createElement;this._self._c},n=[]},6033:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("04ff"),n={components:{carousel:function(){Promise.all([i.e("common/vendor"),i.e("components/carousel/index")]).then(function(){return resolve(i("7662"))}.bind(null,i)).catch(i.oe)},imgcomponent:function(){i.e("pages/activity/waterfull/components/imgcomponent").then(function(){return resolve(i("6262"))}.bind(null,i)).catch(i.oe)},float:function(){i.e("components/float/index").then(function(){return resolve(i("a9eb"))}.bind(null,i)).catch(i.oe)}},data:function(){return{relatedType:"",newType:"",keyword:"",entertainmentSiftCategoryId:"",isQuote:null,userId:"",tags:[{name:"全部",id:0},{name:"视频",id:1},{name:"图文",id:2}],type:1,showpopadd:!1,isarticle:!0,dataList:[],videoList:[],imgList:[],current:1,isLoadMore:!1,visitinto:null,tagcurrent:1,videocurrent:1,imgcurrent:1,articleId:null,newuserid:null,selectionType:null,relatedId:null,shopId:null,isShopPunch:null,userType:null,lineBg:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAGCAYAAABThMdSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBNEE4OTg4MjhDOEYxMUVEQkUxODkxMjU3MTBGOEZCMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBNEE4OTg4MzhDOEYxMUVEQkUxODkxMjU3MTBGOEZCMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkE0QTg5ODgwOEM4RjExRURCRTE4OTEyNTcxMEY4RkIxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkE0QTg5ODgxOEM4RjExRURCRTE4OTEyNTcxMEY4RkIxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+6oq/SwAAAPVJREFUeNqkUtsNwjAMjJPyBRt0I8Qf/+yB+GYe5mEQKqBtjINscbIMUkWkax52Lr6e6dr3q5TSUbATbASTYBaMgqfiLnjomZ0Pem4xyxsgNup8g3uWP+l+gjdZ54ak+wprTp/BnXxOggOQZL3QZoJkgn1VItI8BsH2WIZ7xsW6Lq7AaPCP2Ju3Ee0DEoZi2RVPLsZOCDnRFdYoKOL9VnAoIgckVkgFK+1RcydBgTNwEcTMfuStMFP6c7QHL2pjdkor/M0OckrgSglaLDv7OSjYO0VLRLWizrreCtbur7Lr8RyIK+oGtlp1Aihox+RiS53glwADAIjGYd2iTm4WAAAAAElFTkSuQmCC",tag:0,shopCategory:null}},computed:{navbarHeight:function(){return t.getStorageSync("menuInfo")?t.getStorageSync("menuInfo").contentTop:0},menuHeight:function(){return t.getStorageSync("menuInfo")?t.getStorageSync("menuInfo").menuHeight:0},menuTop:function(){return t.getStorageSync("menuInfo")?t.getStorageSync("menuInfo").menuTop-this.statusBarHeight:0}},onHide:function(){t.getStorageSync("token")&&this.$request.post("/coc-active/api/v1/user/behavior/visit_exit",{userVisitId:this.visitinto}).then((function(t){}))},onUnload:function(){t.getStorageSync("token")&&this.$request.post("/coc-active/api/v1/user/behavior/visit_exit",{userVisitId:this.visitinto}).then((function(t){}))},onLoad:function(e){var i=this;e.enter&&t.setStorageSync("enter",e.enter),e.selectionType&&(this.selectionType=e.selectionType),e.userType&&(this.userType=e.userType),e.relatedId&&(this.relatedId=e.relatedId),10==e.isShopPunch?this.isShopPunch=0:this.isShopPunch=e.isShopPunch,"分享"==e.fromPage?this.showBack=!1:this.showBack=!0,e.shopId&&(this.shopId=e.shopId),e.entertainmentSiftCategoryId&&(this.entertainmentSiftCategoryId=e.entertainmentSiftCategoryId),e.relatedType&&(this.relatedType=e.relatedType),e.newType&&(this.newType=e.newType),e.keyword&&(this.keyword=e.keyword),e.tag&&(this.tag=1*e.tag),e.shopCategory&&(this.shopCategory=e.shopCategory),e.title&&t.setNavigationBarTitle({title:e.title}),10==e.isQuote?this.isQuote=0:this.isQuote=e.isQuote,this.userId=t.getStorageSync("userId"),this.getbyId(e.id,2),this.articleId=e.id,e.userId&&(this.newuserid=e.userId),1==e.isQuote&&(this.isQuote=1),t.$on("changelike",(function(t){1==t.likeType?(i.imgList[t.index].article.likeType=1,i.imgList[t.index].article.likeBaseNum=i.imgList[t.index].article.likeBaseNum+1):2==t.likeType&&(i.imgList[t.index].article.likeType=2,i.imgList[t.index].article.likeBaseNum=i.imgList[t.index].article.likeBaseNum+-1)})),t.$on("changid",(function(t){i.articleId=t}))},onReachBottom:function(){this.isLoadMore||0==this.type&&(this.current++,this.getList())},onShow:function(){var e=this;t.getStorageSync("token")&&this.$request.post("/coc-active/api/v1/user/behavior/visit_into",{type:5}).then((function(t){e.visitinto=t}))},onShareAppMessage:function(e){this.share();var i="/pages/activity/waterfull/imglist?articleId="+this.articleId+"&fromPage=分享&enter=117";return{path:i,success:function(e){t.showToast({title:"分享成功"})},fail:function(e){t.showToast({title:"分享失败",icon:"none"})}}},onShareTimeline:function(e){this.share();var i="/pages/activity/waterfull/imglist?articleId="+this.articleId+"&fromPage=分享&enter=117";return{path:i,success:function(e){t.showToast({title:"分享成功"})},fail:function(e){t.showToast({title:"分享失败",icon:"none"})}}},methods:{share:function(){var t=this;1!=this.type&&2!=this.type||this.$newrequest.post("/coc-social/api/v2/article/share",{id:this.articleId}).then((function(e){200==e.code&&(1==t.type?t.videoList.filter((function(e,i){t.articleId==e.article.id&&e.article.shareBaseNum++})):t.imgList.filter((function(e,i){t.articleId==e.article.id&&e.article.shareBaseNum++})))}))},getbyId:function(t,e){var i=this;this.$request.post("coc-social/api/v1/article/findById",{current:1,id:t,size:99}).then((function(s){2==e?(s.data.article.imgarr=s.data.article.imgs.split(","),i.imgList.push(s.data),i.getotherimgList(t)):(i.videoList.push(s.data),i.getothervideoList(t))}))},OnPushPostDetail:function(e){e.video?t.navigateTo({url:"/pages/activity/articlevideo/index?id="+e.articleId}):(this.imgList=[],this.tagcurrent=2,this.type=2,this.getbyId(e.articleId,2))},changefollowType:function(t){1==this.imgList[t].article.followType?this.imgList[t].article.followType=2:this.imgList[t].article.followType=1},change:function(t){this.articleId=this.imgList[t.detail.current].article.id,t.detail.current/9%1===0&&(this.imgcurrent++,this.getimgList())},sendid:function(t){var e=this;this.$newrequest.post("coc-social/api/v1/article/findById",{current:1,id:t.article.id,size:3}).then((function(i){i.data.article.imgarr=i.data.article.imgs.split(","),e.imgList.filter((function(s,n){s.article.id==t.article.id&&e.$set(e.imgList,n,i.data)}))}))},deleteimg:function(t){var e=this;this.imgList.filter((function(i,s){i.article.id==t&&e.imgList.splice(s,1)}))},detailvideo:function(t){var e=this;this.videoList.filter((function(i,s){i.article.id==t&&e.videoList.splice(s,1)}))},setnewvideo:function(t,e){this.$set(this.videoList,t,e)},likenumchange:function(t,e){2==t?(this.videoList[e].article.likeType=1,this.videoList[e].article.likeBaseNum=this.videoList[e].article.likeBaseNum+1):(this.videoList[e].article.likeType=2,this.videoList[e].article.likeBaseNum=this.videoList[e].article.likeBaseNum-1)},getmorevideo:function(){this.videocurrent++,this.getvideoList()},getotherimgList:function(t){var e=this;this.$newrequest.post("/coc-social/api/v2/article/articleList",{current:this.imgcurrent,size:10,type:2,articleId:t,userId:this.newuserid,relatedId:this.relatedId,isQuote:this.isQuote,selectionType:this.selectionType,relatedType:this.relatedType,newType:this.newType,keyword:this.keyword,shopId:this.shopId,isShopPunch:this.isShopPunch,userType:this.userType,entertainmentSiftCategoryId:this.entertainmentSiftCategoryId,shopCategory:this.shopCategory}).then((function(t){t.data.records.filter((function(t){t.article.imgarr=t.article.imgs.split(",")})),t.data.records.filter((function(t){e.imgList.push(t)}))}))},getimgList:function(){var t=this,e=this;1==this.imgcurrent&&(this.$showLoading(),setTimeout((function(){e.$hideLoading()}),3e3)),this.$newrequest.post("/coc-social/api/v2/article/articleList",{current:this.imgcurrent,size:10,type:2,userId:this.newuserid,isQuote:this.isQuote,selectionType:this.selectionType,relatedType:this.relatedType,newType:this.newType,relatedId:this.relatedId,shopId:this.shopId,isShopPunch:this.isShopPunch,keyword:this.keyword,userType:this.userType,entertainmentSiftCategoryId:this.entertainmentSiftCategoryId,shopCategory:this.shopCategory}).then((function(e){1==t.imgcurrent&&(t.articleId=e.data.records[0].article.id),e.data.records.filter((function(t){t.article.imgarr=t.article.imgs.split(",")})),e.data.records.filter((function(e){t.imgList.push(e)}))}))},getothervideoList:function(t){var e=this,i=this;this.$newrequest.post("/coc-social/api/v2/article/articleList",{current:this.videocurrent,size:10,type:1,articleId:t,userId:this.newuserid,isQuote:this.isQuote,selectionType:this.selectionType,relatedId:this.relatedId,relatedType:this.relatedType,newType:this.newType,shopId:this.shopId,isShopPunch:this.isShopPunch,keyword:this.keyword,userType:this.userType,entertainmentSiftCategoryId:this.entertainmentSiftCategoryId,shopCategory:this.shopCategory}).then((function(t){1==e.videocurrent&&(i.$refs.videolist.getonload(),i.$refs.videolist.getchangdi(t.data.records[0].article.id),t.data.records.filter((function(t){e.videoList.push(t)})))}))},getvideoList:function(){var t=this,e=this;1==this.videocurrent&&(this.$showLoading(),setTimeout((function(){e.$hideLoading()}),3e3)),this.$newrequest.post("/coc-social/api/v2/article/articleList",{current:this.videocurrent,size:10,type:1,userId:this.newuserid,isQuote:this.isQuote,selectionType:this.selectionType,relatedType:this.relatedType,newType:this.newType,relatedId:this.relatedId,keyword:this.keyword,shopId:this.shopId,isShopPunch:this.isShopPunch,userType:this.userType,entertainmentSiftCategoryId:this.entertainmentSiftCategoryId,shopCategory:this.shopCategory}).then((function(i){1==t.videocurrent?(t.articleId=i.data.records[0].article.id,e.$refs.videolist.getonload(),e.$refs.videolist.getchangdi(i.data.records[0].article.id),i.data.records.filter((function(e){t.videoList.push(e)}))):i.data.records.filter((function(e){t.videoList.push(e)}))}))},OnAddpost:function(){(0,s.tologin)(),t.redirectTo({url:"/pages/wiseman/component/addimgarticle?isold=1",success:function(t){}})},clear:function(){this.current=1,this.isLoadMore=!1,this.dataList=[],this.getList()},tosearch:function(t){this.current=1,this.isLoadMore=!1,this.dataList=[],this.$refs.waterfallsFlowRef.refresh(),this.getList()},getList:function(){var t=this;this.$newrequest.post("/coc-social/api/v2/article/myArticleList",{size:10,current:this.current,title:this.keyword,userId:0}).then((function(e){0==e.data.total?t.isarticle=!1:t.isarticle=!0,e.data.records.filter((function(t,e){t.imgs?t.coverPicture=t.imgs.split(",")[0]:t.coverPicture=t.video+"?x-oss-process=video/snapshot,t_1000,m_fast"})),e.data.records.length<10&&(t.isLoadMore=!0),1==t.current?t.dataList=e.data.records:e.data.records.filter((function(e){t.dataList.push(e)}))}))}}};e.default=n}).call(this,i("543d")["default"])},a9ea:function(t,e,i){"use strict";var s=i("dcf3"),n=i.n(s);n.a},ab869:function(t,e,i){"use strict";(function(t,e){var s=i("4ea4");i("76b1");s(i("66fd"));var n=s(i("e58b"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(n.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},dcf3:function(t,e,i){},e58b:function(t,e,i){"use strict";i.r(e);var s=i("5a0c"),n=i("55ff");for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);i("a9ea");var o=i("f0c5"),a=Object(o["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],void 0);e["default"]=a.exports}},[["ab869","common/runtime","common/vendor"]]]);