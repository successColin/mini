(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activity/activityRegistration/bankactivity"],{1469:function(t,e,i){"use strict";i.r(e);var n=i("fb79"),s=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=s.a},"51ae":function(t,e,i){"use strict";(function(t,e){var n=i("4ea4");i("4319");n(i("66fd"));var s=n(i("917d"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(s.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},"917d":function(t,e,i){"use strict";i.r(e);var n=i("ce36"),s=i("1469");for(var o in s)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(o);i("a116");var a=i("f0c5"),r=Object(a["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=r.exports},a116:function(t,e,i){"use strict";var n=i("a6d1"),s=i.n(n);s.a},a6d1:function(t,e,i){},ce36:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uSearch:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-search/u-search")]).then(i.bind(null,"ea79"))},uTabs:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-tabs/u-tabs")]).then(i.bind(null,"f510"))},uAvatar:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-avatar/u-avatar")]).then(i.bind(null,"6d2c"))},uIcon:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(i.bind(null,"f23e"))},uLineProgress:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-line-progress/u-line-progress")]).then(i.bind(null,"a426"))},uDivider:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-divider/u-divider")]).then(i.bind(null,"4e62"))},uPopup:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(i.bind(null,"076f"))}},s=function(){var t=this,e=t.$createElement,i=(t._self._c,2==t.tagitem?t.groupList.length:null),n=2!=t.tagitem||i>0?null:t.groupList.length;t._isMounted||(t.e0=function(e){t.isshowpop=!1}),t.$mp.data=Object.assign({},{$root:{g0:i,g1:n}})},o=[]},fb79:function(t,e,i){"use strict";(function(t){var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("9523")),o=i("7dcd"),a={components:{carousel:function(){Promise.all([i.e("common/vendor"),i.e("components/carousel/index")]).then(function(){return resolve(i("c969"))}.bind(null,i)).catch(i.oe)},pushclosedactivity:function(){i.e("pages/activity/components/pushclosedactivity").then(function(){return resolve(i("6e88"))}.bind(null,i)).catch(i.oe)}},data:function(){var t;return t={token:null,isExpert:null,newList:[],groupList:[],tagitem:3,isshowpop:!1,showimg:"",currenttag:0,newisshowend:!1,isshowend:!1,isshow:!0,isEnd:1,tags:[],isActivitys:!0,keyword:"",newUserLimit:0,dataList:[],tagList:[],title:"",shopTypeId:0,payType:0,current:1,categoryId:""},(0,s.default)(t,"current",1),(0,s.default)(t,"isLoadMore",!1),(0,s.default)(t,"activityPaymentPreferenceId",6),(0,s.default)(t,"visitinto",null),(0,s.default)(t,"lineBg","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAGCAYAAABThMdSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBNEE4OTg4MjhDOEYxMUVEQkUxODkxMjU3MTBGOEZCMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBNEE4OTg4MzhDOEYxMUVEQkUxODkxMjU3MTBGOEZCMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkE0QTg5ODgwOEM4RjExRURCRTE4OTEyNTcxMEY4RkIxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkE0QTg5ODgxOEM4RjExRURCRTE4OTEyNTcxMEY4RkIxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+6oq/SwAAAPVJREFUeNqkUtsNwjAMjJPyBRt0I8Qf/+yB+GYe5mEQKqBtjINscbIMUkWkax52Lr6e6dr3q5TSUbATbASTYBaMgqfiLnjomZ0Pem4xyxsgNup8g3uWP+l+gjdZ54ak+wprTp/BnXxOggOQZL3QZoJkgn1VItI8BsH2WIZ7xsW6Lq7AaPCP2Ju3Ee0DEoZi2RVPLsZOCDnRFdYoKOL9VnAoIgckVkgFK+1RcydBgTNwEcTMfuStMFP6c7QHL2pjdkor/M0OckrgSglaLDv7OSjYO0VLRLWizrreCtbur7Lr8RyIK+oGtlp1Aihox+RiS53glwADAIjGYd2iTm4WAAAAAElFTkSuQmCC"),t},computed:{navbarHeight:function(){return t.getStorageSync("menuInfo")?t.getStorageSync("menuInfo").contentTop:0},menuHeight:function(){return t.getStorageSync("menuInfo")?t.getStorageSync("menuInfo").menuHeight:0},menuTop:function(){return t.getStorageSync("menuInfo")?t.getStorageSync("menuInfo").menuTop-this.statusBarHeight:0}},onHide:function(){t.getStorageSync("token")&&this.$request.post("/coc-active/api/v1/user/behavior/visit_exit",{userVisitId:this.visitinto}).then((function(t){}))},onUnload:function(){t.getStorageSync("token")&&this.$request.post("/coc-active/api/v1/user/behavior/visit_exit",{userVisitId:this.visitinto}).then((function(t){}))},onLoad:function(e){this.token=t.getStorageSync("token"),this.isExpert=t.getStorageSync("isExpert"),2==e.isEnd&&(this.isEnd=2),e.value&&(this.title=e.value,this.keyword=e.value),e.shopTypeId&&(this.shopTypeId=e.shopTypeId),e.activityPaymentPreferenceId&&(this.activityPaymentPreferenceId=e.activityPaymentPreferenceId,6==e.activityPaymentPreferenceId?this.currenttag=0:5==e.activityPaymentPreferenceId?this.currenttag=1:4==e.activityPaymentPreferenceId&&(this.currenttag=2)),this.getList(),this.getnewslist()},onReachBottom:function(){console.log(this.tagitem),this.isLoadMore||this.isshowend||(this.current++,1==this.tagitem?this.getList():2==this.tagitem?this.getgrouplist():3==this.tagitem&&this.getnewslist()),this.isLoadMore||(this.current++,1==this.tagitem?this.getList():2==this.tagitem?this.getgrouplist():3==this.tagitem&&this.getnewslist()),this.isshowend&&1==this.tagitem&&(this.newisshowend=!0),this.isLoadMore||2!=this.isEnd||(this.current++,this.getendactivity())},onPullDownRefresh:function(){this.current=1,this.getnewslist(),setTimeout((function(){t.stopPullDownRefresh()}),1e3)},onShow:function(){var e=this;t.getStorageSync("token")&&this.$request.post("/coc-active/api/v1/user/behavior/visit_into",{type:2}).then((function(t){e.visitinto=t}))},methods:{ClickZhiDing:function(){t.pageScrollTo({scrollTop:0,duration:300})},OnPushNewDetail:function(e){console.log(e),t.navigateTo({url:"/pages/activity/activityRegistration/newdetail?id="+e.id})},OnPushGroupDetail:function(e){t.navigateTo({url:"/pages/grouppurchase/detail?id="+e.id})},getgrouplist:function(){var t=this;this.$newrequest.post("/coc-active/api/v1/group/list",{current:this.current,size:20,title:this.keyword,type:this.currenttag+2}).then((function(e){e.data.records.length<20&&(t.isLoadMore=!0),1===t.current?t.groupList=e.data.records:e.data.records.filter((function(e){t.groupList.push(e)}))}))},getnewslist:function(){var t=this;this.$newrequest.post("/coc-active/api/v1/bank/news/list",{activityPaymentPreferenceId:this.activityPaymentPreferenceId,current:this.current,size:20}).then((function(e){e.data.records.length<20&&(t.isLoadMore=!0),1===t.current?t.newList=e.data.records:e.data.records.filter((function(e){t.newList.push(e)}))}))},OnChangeTagItem:function(t){this.tagitem=t,this.current=1,1==t?this.getList():2==t?this.getgrouplist():3==t&&this.getnewslist()},OnClickBank:function(e){3==e?t.navigateTo({url:"/pages/carShops/upkeep/insurance?id=0"}):1==e?t.navigateTo({url:"/pages/my/creditCard/detail?type=g"}):2==e&&t.navigateTo({url:"/pages/my/creditCard/detail?type=n"})},OnPushClose:function(){this.isLoadMore=!1,this.isEnd=2,this.current=1,this.getendactivity()},OnClickTags:function(t){this.current=1,this.currenttag=t.index,this.activityPaymentPreferenceId=t.id,this.tagitem=3,this.isEnd=1,this.isLoadMore=!1,this.getnewslist()},clear:function(){this.keyword="",this.title="",this.current=1},tosearch:function(t){this.title=t,3==this.tagitem?this.getnewslist():1==this.tagitem?this.getList():this.getgrouplist()},Onremind:function(e,i){(0,o.tologin)();var n=this;if(1==e.isRemind)return!1;t.requestSubscribeMessage({tmplIds:["jdZ2r8BMJ6YmBpnrT_jXa4chRwMWEVLpjYfCUgPnD4Q"],success:function(s){"accept"==s["jdZ2r8BMJ6YmBpnrT_jXa4chRwMWEVLpjYfCUgPnD4Q"]&&n.$request.get("/coc-active/api/v1/activity/signUpStartRemind/"+e.activityId).then((function(e){200==e.code?(n.dataList[i].isRemind=1,t.showToast({icon:"none",title:"提醒成功，请等待通知"})):t.showToast({icon:"none",title:e.message})}))}})},OnPushDetail:function(e){t.navigateTo({url:"/pages/home/activityDetail/index?id="+e.activityId})},getendactivity:function(){var t=this;this.$newrequest.post("/coc-active/api/v2/homePage/getActivitysV2",{categoryId:this.categoryId,current:this.current,payType:this.payType,shopTypeId:5,isEnd:this.isEnd,size:20,title:this.title,newUserLimit:this.newUserLimit,activityPaymentPreferenceId:this.activityPaymentPreferenceId}).then((function(e){0==e.data.homePageActivitysVOIPage.total?t.isActivitys=!1:t.isActivitys=!0,e.data.homePageActivitysVOIPage.records.length<20&&(t.isLoadMore=!0),e.data.homePageActivitysVOIPage.records.filter((function(e){t.dataList.push(e)}))}))},getList:function(){var t=this;this.$newrequest.post("/coc-active/api/v2/homePage/getActivitysV2",{categoryId:this.categoryId,current:this.current,payType:this.payType,shopTypeId:5,isEnd:this.isEnd,size:20,title:this.title,newUserLimit:this.newUserLimit,activityPaymentPreferenceId:this.activityPaymentPreferenceId}).then((function(e){0==e.data.homePageActivitysVOIPage.total?t.isActivitys=!1:t.isActivitys=!0,t.tags=e.data.activityCategories,e.data.homePageActivitysVOIPage.records.length<3&&1==t.current&&1==t.isEnd?(t.newisshowend=!0,t.isshowend=!0,t.isLoadMore=!0):e.data.homePageActivitysVOIPage.records.length<20&&1==t.isEnd?(t.isshowend=!0,t.isLoadMore=!0):e.data.homePageActivitysVOIPage.records.length<20&&(t.isLoadMore=!0),1===t.current?t.dataList=e.data.homePageActivitysVOIPage.records:e.data.homePageActivitysVOIPage.records.filter((function(e){t.dataList.push(e)}))}))}}};e.default=a}).call(this,i("543d")["default"])}},[["51ae","common/runtime","common/vendor"]]]);