(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activity/chooseCity/chooseCity"],{"0fc8":function(e,t,a){"use strict";(function(e,t){var n=a("4ea4");a("76b1");n(a("66fd"));var i=n(a("15c6"));e.__webpack_require_UNI_MP_PLUGIN__=a,t(i.default)}).call(this,a("bc2e")["default"],a("543d")["createPage"])},"11a7":function(e,t,a){"use strict";a.r(t);var n=a("f1dd"),i=a.n(n);for(var l in n)["default"].indexOf(l)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(l);t["default"]=i.a},"15c6":function(e,t,a){"use strict";a.r(t);var n=a("c3be"),i=a("11a7");for(var l in i)["default"].indexOf(l)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(l);a("779a");var u=a("f0c5"),r=Object(u["a"])(i["default"],n["b"],n["c"],!1,null,"78ad64a8",null,!1,n["a"],void 0);t["default"]=r.exports},2010:function(e,t,a){},"779a":function(e,t,a){"use strict";var n=a("2010"),i=a.n(n);i.a},c3be:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return n}));var n={uIndexList:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-index-list/u-index-list")]).then(a.bind(null,"5e3b"))},uIndexItem:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-index-item/u-index-item")]).then(a.bind(null,"79b3"))},uIndexAnchor:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-index-anchor/u-index-anchor")]).then(a.bind(null,"45029"))}},i=function(){var e=this.$createElement;this._self._c},l=[]},f1dd:function(e,t,a){"use strict";(function(e){var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("2eee")),l=n(a("c973")),u=a("04ff"),r=a("85a3"),o={data:function(){return{scrollTop:0,indexList:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],name:"",cityname:"",cityList:[],initCityList:[{value:[],label:"A"},{value:[],label:"B"},{value:[],label:"C"},{value:[],label:"D"},{value:[],label:"E"},{value:[],label:"F"},{value:[],label:"G"},{value:[],label:"H"},{value:[],label:"I"},{value:[],label:"J"},{value:[],label:"K"},{value:[],label:"L"},{value:[],label:"M"},{value:[],label:"N"},{value:[],label:"O"},{value:[],label:"P"},{value:[],label:"Q"},{value:[],label:"R"},{value:[],label:"S"},{value:[],label:"T"},{value:[],label:"U"},{value:[],label:"V"},{value:[],label:"W"},{value:[],label:"X"},{value:[],label:"Y"},{value:[],label:"Z"}],backCityList:[],status:!1}},onPageScroll:function(e){this.scrollTop=e.scrollTop},onLoad:function(){this.getList(),this.getAddress()},methods:{getList:function(){var t=this;return(0,l.default)(i.default.mark((function a(){var n,l,u,o,c;return i.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,r.getCityListSync)();case 3:n=a.sent,l=n.status,u=n.result,l||(o=u[1],c=JSON.parse(JSON.stringify(t.initCityList)),o.forEach((function(e){for(var t=0;t<c.length;t++){var a=c[t];if(e.pinyin[0].substr(0,1).toUpperCase().indexOf(a.label)>-1){a.value.push({value:e.name,label:a.label,location:e.location,code:e.id});break}}})),t.cityList=c,t.backCityList=o),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](0),e.$u.toast(a.t0),t.cityList=JSON.parse(JSON.stringify(t.initCityList));case 13:case"end":return a.stop()}}),a,null,[[0,9]])})))()},getSearch:function(){var e=this;this.name.length>0?this.status=!0:this.status=!1;var t=JSON.parse(JSON.stringify(this.initCityList));this.backCityList.forEach((function(a){for(var n=0;n<t.length;n++){var i=t[n];if(a.pinyin[0].substr(0,1).toUpperCase().indexOf(i.label)>-1&&(a.name.indexOf(e.name)>-1||""===e.name)){i.value.push({value:a.name,label:i.label,location:a.location,code:a.id});break}}})),console.log(t),this.cityList=t},getAddress:function(e){var t=this;return(0,l.default)(i.default.mark((function a(){var n,l,o,c,s,d,f,v,b,m,h,p,g,y,x;return i.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=(0,u.getstorage)("cityname"),l=(0,u.getstorage)("citycode"),!n||!l||e){a.next=5;break}return t.cityname=n,a.abrupt("return");case 5:return a.prev=5,a.next=8,(0,r.getLocationSync)();case 8:return o=a.sent,c=o.latitude,s=o.longitude,a.next=13,(0,r.reverseGeocoderSync)(c,s);case 13:d=a.sent,f=d.status,v=d.result,b=v.ad_info,m=b.nation_code,h=b.city_code,p=b.city,g=v.location,y=g.lat,x=g.lng,f||((0,u.setstorage)("lat",y),(0,u.setstorage)("lng",x),(0,u.setstorage)("city",encodeURI(p)),t.cityname=p.substr(0,p.length-1),(0,u.setstorage)("cityname",t.cityname),(0,u.setstorage)("citycode",h.replace(m,""))),a.next=30;break;case 26:a.prev=26,a.t0=a["catch"](5),(0,u.setstorage)("lat","29.092977"),(0,u.setstorage)("lng","119.663935");case 30:case"end":return a.stop()}}),a,null,[[5,26]])})))()},reverseGeocode:function(e,t){return new Promise((function(a,n){var i=new plus.maps.Point(e,t);plus.maps.Map.reverseGeocode(i,{},(function(e){a(e)}),(function(e){n(e)}))}))},bindClick:function(t){e.$emit("homeChangeCity",{name:t.value,location:t.location,code:t.code}),e.navigateBack({delta:1})}}};t.default=o}).call(this,a("543d")["default"])}},[["0fc8","common/runtime","common/vendor"]]]);