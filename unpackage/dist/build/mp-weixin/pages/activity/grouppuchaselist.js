(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activity/grouppuchaselist"],{"2e67":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return a}));var a={uIcon:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(i.bind(null,"0f14"))},uAvatar:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-avatar/u-avatar")]).then(i.bind(null,"d838"))},uRate:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-rate/u-rate")]).then(i.bind(null,"439d"))},uDivider:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-divider/u-divider")]).then(i.bind(null,"944a"))},uPopup:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(i.bind(null,"8add"))}},n=function(){var e=this.$createElement;this._self._c},o=[]},3704:function(e,t,i){"use strict";var a=i("62c6"),n=i.n(a);n.a},4502:function(e,t,i){"use strict";i.r(t);var a=i("2e67"),n=i("5513");for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);i("3704");var s=i("f0c5"),r=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"b962a05e",null,!1,a["a"],void 0);t["default"]=r.exports},5513:function(e,t,i){"use strict";i.r(t);var a=i("942d"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},"62c6":function(e,t,i){},"942d":function(e,t,i){"use strict";(function(e){var a=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("2eee")),o=a(i("c973")),s={components:{carousel:function(){Promise.all([i.e("common/vendor"),i.e("components/carousel/index")]).then(function(){return resolve(i("7662"))}.bind(null,i)).catch(i.oe)}},computed:{navbarHeight:function(){return e.getStorageSync("menuInfo")?e.getStorageSync("menuInfo").contentTop:0}},data:function(){return{categoryList:[],otherSearchVisble:!1,searchVisble:!1,sortList:[{id:1,name:"默认"},{id:2,name:"距离"},{id:3,name:"评分"}],sponsorList:[{id:null,name:"全部"},{id:1,name:"活动"},{id:2,name:"团购"}],paymentDiscountList:[],oldSearchField:{shopTypeId:"",shopTypeName:"",activityPaymentPreferenceId:"",activityPaymentPreferenceName:"",shopCategoryId:"",shopCategoryName:""},searchField:{current:1,sort:1,shopTypeId:"",shopTypeName:"",activityPaymentPreferenceId:"",activityPaymentPreferenceName:"",shopCategoryId:"",shopCategoryName:"",lng:"",lat:"",shopName:"",size:100},topDataList:[],dataList:[],showArrondi:!1,payType:null,shopType:null,sort:1,payTypepop:null,shopTypepop:null,sortpop:1,current:1,isLoadMore:!1,sortindex:0,shopTypeindex:0,payTypeindex:0,shopCategoryId:null}},onReachBottom:function(){this.isLoadMore||(this.current++,this.getList())},onLoad:function(e){e.shopCategoryId&&(this.shopCategoryId=e.shopCategoryId),this.getCategoryList(),this.getPaymentPreferenceList(),this.getList()},methods:{OnPush:function(t){e.navigateTo({url:"/pages/activityMall/business/index?id="+t.id})},nextList:function(){this.isLoadMore||(this.current++,this.getList())},getList:function(){var e=this;this.$newrequest.post("/coc-active/api/v2/homePage/getActivityShopNew",{current:this.current,payType:this.payType,shopType:this.shopType,size:10,sort:this.sort,shopCategoryId:this.shopCategoryId}).then((function(t){t.data.records.filter((function(e){e.imglist=[],e.imgs.filter((function(t){t.associatedContent.split(",").filter((function(t){e.imglist.push(t)}))}))})),t.data.records.length<20&&(e.isLoadMore=!0),1==t.data.current?e.dataList=t.data.records:t.data.records.filter((function(t){e.dataList.push(t)}))}))},getPaymentPreferenceList:function(){var t=this,i=[{id:null,name:"全部"}];this.$newrequest.post("/coc-active/api/v1/activityShop/list").then(function(){var a=(0,o.default)(n.default.mark((function a(o){return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:200==o.code?(i=i.concat(o.data),t.paymentDiscountList=i):e.showToast({title:o.message,icon:"none",duration:2e3});case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},getCategoryList:function(){var t=this;this.$newrequest.post("/coc-active/api/v1/activityShop/categoryList",{current:1,size:100}).then(function(){var i=(0,o.default)(n.default.mark((function i(a){return n.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:200==a.code?t.categoryList=a.data.records&&a.data.records.length>0?a.data.records:[]:e.showToast({title:a.message,icon:"none",duration:2e3});case 1:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())},OnPushView:function(t){1==t?e.navigateTo({url:"/pages/activity/activityRegistration/bankactivity?shopTypeId=1&activityPaymentPreferenceId=6"}):2==t?e.navigateTo({url:"/pages/activity/activityRegistration/bankactivity?shopTypeId=2&activityPaymentPreferenceId=5"}):3==t?e.navigateTo({url:"/pages/activity/activityRegistration/bankactivity?shopTypeId=3&activityPaymentPreferenceId=4"}):4==t&&e.navigateTo({url:"/pages/activity/activityRegistration/foursactivity?"})},OnPushSearch:function(t){t.stopPropagation(),e.navigateTo({url:"/pages/activity/search/index?type=13"})},getHomeBusinessList:function(t){var i=this,a=this.changeSearchField();t&&(a.size=t),this.$newrequest.post("/coc-active/api/v1/activityShop/signUpIn/list",a).then(function(){var t=(0,o.default)(n.default.mark((function t(a){var o;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:200==a.code?(o=a.data,o.forEach((function(e){e.baseHead=e.baseHead?e.baseHead:"https://oss.dcqcjlb.com/51che_java_dev/20221031/96f3cd701da641ddb4c43e4349054230.jpg"})),i.topDataList=o,i.closeSearch()):e.showToast({title:a.message,icon:"none",duration:2e3});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},changeSearchField:function(){var e=Object.assign({},this.searchField);return e.activityPaymentPreferenceId||delete e["activityPaymentPreferenceId"],e.shopCategoryId||delete e["shopCategoryId"],e.shopTypeId||delete e["shopTypeId"],e.shopName||delete e["shopName"],e.lng||delete e["lng"],e.lat||delete e["lat"],delete e["activityPaymentPreferenceName"],delete e["shopCategoryName"],delete e["shopTypeName"],e},openSearch:function(e){1==e?(this.oldSearchField.activityPaymentPreferenceId=this.searchField.activityPaymentPreferenceId,this.oldSearchField.activityPaymentPreferenceName=this.searchField.activityPaymentPreferenceName,this.oldSearchField.shopTypeId=this.searchField.shopTypeId,this.oldSearchField.shopTypeName=this.searchField.shopTypeName,this.otherSearchVisble=!0):2==e&&(this.oldSearchField.shopCategoryId=this.searchField.shopCategoryId,this.oldSearchField.shopCategoryName=this.searchField.shopCategoryName,this.searchVisble=!0)},closeSearch:function(){this.oldSearchField.activityPaymentPreferenceId="",this.oldSearchField.activityPaymentPreferenceName="",this.oldSearchField.shopTypeId="",this.oldSearchField.shopTypeName="",this.oldSearchField.shopCategoryId="",this.oldSearchField.shopCategoryName="",this.searchVisble=!1,this.otherSearchVisble=!1},search:function(e,t,i){1==t?(this.sortpop=e.id,this.sortindex=i):2==t?(this.shopTypepop=e.id,this.shopTypeindex=i):3==t&&(this.payTypepop=e.id,this.payTypeindex=i)},confirmSearch:function(e){this.sort=this.sortpop,this.shopType=this.shopTypepop,this.payType=this.payTypepop,this.current=1,this.getList(),this.otherSearchVisble=!1},jumpCategory:function(t){e.navigateTo({url:"/pages/activity/grouppuchaselist?shopCategoryId="+t.id})}}};t.default=s}).call(this,i("543d")["default"])},"965a":function(e,t,i){"use strict";(function(e,t){var a=i("4ea4");i("76b1");a(i("66fd"));var n=a(i("4502"));e.__webpack_require_UNI_MP_PLUGIN__=i,t(n.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])}},[["965a","common/runtime","common/vendor"]]]);