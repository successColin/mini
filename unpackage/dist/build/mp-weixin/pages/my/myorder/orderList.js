(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/myorder/orderList"],{3511:function(e,o,t){"use strict";t.r(o);var n=t("909d"),i=t.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){t.d(o,e,(function(){return n[e]}))}(a);o["default"]=i.a},"447b":function(e,o,t){"use strict";(function(e,o){var n=t("4ea4");t("76b1");n(t("66fd"));var i=n(t("bcfe"));e.__webpack_require_UNI_MP_PLUGIN__=t,o(i.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},"909d":function(e,o,t){"use strict";(function(e){var n=t("4ea4");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=n(t("9523")),a=t("04ff"),r={components:{recommend:function(){Promise.all([t.e("common/vendor"),t.e("pages/my/myorder/components/recommend")]).then(function(){return resolve(t("a858"))}.bind(null,t)).catch(t.oe)}},data:function(){return{isvalue:!1,orderdetail:{},orderNo:"",userId:"",joinpeople:"",couponList:[],choosecoupon:[],allprice:"",isshowpage:!1}},onLoad:function(o){var t=this;this.userId=(0,a.getstorage)("userId"),this.orderNo=o.id,e.$on("choosecoupon",(function(e){t.choosecoupon=e.data,t.orderdetail.paidMoney=t.allprice,t.choosecoupon.filter((function(e){t.orderdetail.paidMoney=t.orderdetail.paidMoney-e.discountMoney})),t.orderdetail.paidMoney<=0&&(t.orderdetail.paidMoney=.01)})),this.getcode()},computed:{navbarHeight:function(){return e.getStorageSync("menuInfo")?e.getStorageSync("menuInfo").contentTop:0},contentHeight:function(){return"calc(100vh - ".concat(this.navbarHeight,"px - 26rpx)")}},onShow:function(){},onReachBottom:function(){e.$emit("recommend")},methods:{toClick:function(){e.navigateTo({url:"/pages/activity/activityRegistration/playfulperson"})},OnPushshopHome:function(){3==this.orderdetail.shopTypeId?e.navigateTo({url:"/pages/activityMall/business/index?id="+this.orderdetail.shopId}):2==this.orderdetail.shopTypeId&&e.navigateTo({url:"/pages/carShops/4Sdetail/index?id="+this.orderdetail.shopId})},changvalue:function(e){e?(this.orderdetail.paidMoney=parseFloat(this.orderdetail.paidMoney)-parseFloat(this.orderdetail.scoreDeduction),0==this.orderdetail.paidMoney&&(this.orderdetail.paidMoney=.01)):this.orderdetail.paidMoney=parseFloat(this.orderdetail.paidMoney)+parseFloat(this.orderdetail.scoreDeduction)},OnPushDetail:function(){e.navigateTo({url:"/pages/home/activityDetail/index?id="+this.orderdetail.activityId})},OnGoHome:function(){e.switchTab({url:"/pages/home/index"})},OnPushcoupon:function(){if(1==this.orderdetail.status||2==this.orderdetail.status||3==this.orderdetail.status)return!1;var o=this;e.navigateTo({url:"/pages/service/couponList/index",success:function(e){e.eventChannel.emit("couponList",{data:{couponList:o.couponList,choosecoupon:o.choosecoupon}})}})},OnPay:function(){var e=this,o=!1;o=this.orderdetail.activitySignUpInsurances?1:0;var t=[];this.choosecoupon.filter((function(e){t.push({discountMoney:e.discountMoney,couponNewId:e.couponNewId,couponUserNewId:e.couponUserNewId})}));var n=0;this.isvalue&&(n=this.orderdetail.scoreDeduction),this.showloading=!0,this.$request.post("/coc-active/api/v1/sign_up/payment",(0,i.default)({scoreDeduction:n,couponUserNews:t,payType:"3",signUpId:this.orderdetail.id,activityId:this.orderdetail.activityId,setMealId:this.orderdetail.activitySetMealId,isInsurance:o,subOpenId:(0,a.getstorage)("openid"),setMealAmount:this.orderdetail.flashSalePrice},"scoreDeduction",this.orderdetail.scoreDeduction)).then((function(o){200==o.code?(e.showloading=!1,e.wxpay(o.data.payment.miniPayRequest)):e.$refs.uToast.show({message:o.message})}))},wxpay:function(o){var t=this;e.requestPayment({provider:"wxpay",timeStamp:o.timeStamp,nonceStr:o.nonceStr,package:o.package,signType:o.signType,paySign:o.paySign,appid:o.appId,success:function(o){e.showToast({icon:"success",title:"支付成功",complete:function(){t.getcode()}})},fail:function(o){t.$request.get("/coc-active/api/v1/sign_up/paymentFailed/"+t.orderdetail.id).then((function(e){})),e.showToast({icon:"none",title:"支付失败"})}})},getcode:function(){var e=this;this.isshowpage||this.$showLoading(),this.$request.post("/coc-my/activity/order/detail/v2",{orderNo:this.orderNo}).then((function(o){e.joinpeople=o.data.activitySignUpParticipants.length,e.orderdetail=o.data,e.allprice=o.data.paidMoney,e.couponList=o.data.couponVOS,e.choosecoupon=o.data.orderCouponListVO})).catch((function(e){})).finally((function(){e.isshowpage||(e.isshowpage=!0,e.$hideLoading())}))},paste:function(o){e.setClipboardData({data:o})}}};o.default=r}).call(this,t("543d")["default"])},ba9b:function(e,o,t){},bcfe:function(e,o,t){"use strict";t.r(o);var n=t("bd35"),i=t("3511");for(var a in i)["default"].indexOf(a)<0&&function(e){t.d(o,e,(function(){return i[e]}))}(a);t("e2a4");var r=t("f0c5"),s=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);o["default"]=s.exports},bd35:function(e,o,t){"use strict";t.d(o,"b",(function(){return i})),t.d(o,"c",(function(){return a})),t.d(o,"a",(function(){return n}));var n={uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,"0f14"))},uDivider:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-divider/u-divider")]).then(t.bind(null,"944a"))},uAvatar:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-avatar/u-avatar")]).then(t.bind(null,"d838"))},uRate:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-rate/u-rate")]).then(t.bind(null,"439d"))},uLoadingPage:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-loading-page/u-loading-page")]).then(t.bind(null,"e325"))},uToast:function(){return t.e("uni_modules/uview-ui/components/u-toast/u-toast").then(t.bind(null,"1b13"))}},i=function(){var e=this,o=e.$createElement,t=(e._self._c,e.isshowpage?e.choosecoupon.length:null),n=!e.isshowpage||0!=e.orderdetail.status&&7!=e.orderdetail.status||1==e.orderdetail.isScoreDeduction?null:e.couponList.length,i=!e.isshowpage||0!=e.orderdetail.status&&7!=e.orderdetail.status||1==e.orderdetail.isScoreDeduction||0==n?null:e.choosecoupon.length,a=e.isshowpage?e.orderdetail.activitySignUpInsurances.length:null,r=e.isshowpage?e.orderdetail.activitySignUpInsurances.length:null;e.$mp.data=Object.assign({},{$root:{g0:t,g1:n,g2:i,g3:a,g4:r}})},a=[]},e2a4:function(e,o,t){"use strict";var n=t("ba9b"),i=t.n(n);i.a}},[["447b","common/runtime","common/vendor"]]]);