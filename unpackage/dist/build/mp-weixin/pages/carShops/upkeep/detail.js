(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/carShops/upkeep/detail"],{"0760":function(e,t,n){"use strict";n.r(t);var o=n("b972"),i=n.n(o);for(var s in o)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=i.a},"1e39":function(e,t,n){"use strict";(function(e,t){var o=n("4ea4");n("76b1");o(n("66fd"));var i=o(n("3980"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},3980:function(e,t,n){"use strict";n.r(t);var o=n("fa79"),i=n("0760");for(var s in i)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(s);n("e254");var a=n("f0c5"),r=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,"1e7e0f2f",null,!1,o["a"],void 0);t["default"]=r.exports},8243:function(e,t,n){},b972:function(e,t,n){"use strict";(function(e){var o=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("2eee")),s=o(n("c973")),a=n("04ff"),r={components:{carousel:function(){Promise.all([n.e("common/vendor"),n.e("components/carousel/index")]).then(function(){return resolve(n("7662"))}.bind(null,n)).catch(n.oe)},Poster:function(){n.e("components/zhangyuhao-poster/Poster").then(function(){return resolve(n("8293"))}.bind(null,n)).catch(n.oe)},commission:function(){n.e("components/commission/index").then(function(){return resolve(n("d371"))}.bind(null,n)).catch(n.oe)},joinshopbtn:function(){n.e("components/joinshopbtn/index").then(function(){return resolve(n("ba8e"))}.bind(null,n)).catch(n.oe)},recommendX:function(){Promise.all([n.e("common/vendor"),n.e("components/darenRecommend/recommendX")]).then(function(){return resolve(n("9dd0"))}.bind(null,n)).catch(n.oe)},floatVideo:function(){Promise.all([n.e("common/vendor"),n.e("components/floatVideo/index")]).then(function(){return resolve(n("954c"))}.bind(null,n)).catch(n.oe)}},data:function(){return{showpopshare:!1,token:null,isExpert:null,swiperList:[],showtop:!1,isshowpage:!1,detail:{},detailId:"",autoPlay:!1,list:[],poster:"",forwardUserId:null,customerManagerId:"",iscommission:0,isback:!1,isform:0,recommendLength:0}},onPageScroll:function(t){var n=this;e.getSystemInfo({success:function(e){t.scrollTop>300?n.showtop=!0:n.showtop=!1}})},onLoad:function(t){var n=this;console.log("进来了===========》",JSON.stringify(t),t),t.enter&&e.setStorageSync("enter",t.enter),t.scene&&t.scene.indexOf("_enter=117")&&e.setStorageSync("enter","117"),t.iscommission&&(this.iscommission=t.iscommission),1==t.isapp&&(this.isback=!0),t.isform&&(this.isform=1),this.token=e.getStorageSync("token"),this.isExpert=e.getStorageSync("isExpert"),t.customerManagerId&&(this.customerManagerId=t.customerManagerId),t.id&&(this.detailId=t.id),t.forwardUserId&&(this.forwardUserId=t.forwardUserId,e.getStorageSync("token")?e.getStorageSync("token")&&1!=e.getStorageSync("isExpert")&&this.tempparentid():(0,a.tologin)()),t.scene&&(this.detailId=t.scene.split("_")[0],this.forwardUserId=t.scene.split("_")[1],e.getStorageSync("token")?e.getStorageSync("token")&&1!=e.getStorageSync("isExpert")&&this.tempparentid():(0,a.tologin)()),this.forwardUserId||(this.forwardUserId=(0,a.getstorage)("userId")),e.$on("saveaddshop",(function(e){n.getDetail(n.detailId)})),this.getDetail(this.detailId),this.getRecommendList()},onShow:function(){this.forwardUserId&&e.getStorageSync("token")&&this.tempparentid(),this.getDetail(this.detailId)},onUnload:function(){this.isback&&(window._51club&&window._51club.backIntercept("app"),window.webkit.messageHandlers&&window.webkit.messageHandlers.backIntercept.postMessage("app"))},methods:{getRecommendList:function(){var e=this;return(0,s.default)(i.default.mark((function t(){var n,o;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$request.post("/coc-social/api/v2/article/expertRecommend",{current:1,size:100,relatedType:2,relatedId:e.detailId});case 2:n=t.sent,o=n.data.records,e.recommendLength=o.length;case 5:case"end":return t.stop()}}),t)})))()},tempparentid:function(){this.$request.post("/coc-active/api/v1/invite/temp_parent_id/add",{tempParentId:this.forwardUserId}).then((function(e){}))},posterSuccess:function(e){this.poster=e},OnSaveImage:function(){var t=[this.poster];e.previewImage({current:99999,urls:t,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(e){console.log("选中了第"+(e.tapIndex+1)+"个按钮,第"+(e.index+1)+"张图片")},fail:function(e){console.log(e.errMsg)}}})},OnCloseShare:function(){this.showpopshare=!1},popposter:function(){var t=this;if(!e.getStorageSync("token"))return(0,a.tologin)(),!1;this.$request.post("/coc-active/api/v1/invite/getMiniProgramQrCode",{page:"pages/carShops/upkeep/detail",scene:this.detailId+"_"+this.forwardUserId+"_enter=117"}).then((function(e){t.showpopshare=!0,t.list=[{type:"image",path:t.detail.posterFigureUrl,x:0,y:0,width:443,height:787},{type:"image",path:e.data.qrCode,x:18,y:682,width:90,height:90}],t.$nextTick((function(){t.$refs.poster.create()}))}))},Oncopy:function(t){e.setClipboardData({data:t,success:function(){e.$u.toast("复制成功")}})},ClickZhiDing:function(){e.pageScrollTo({scrollTop:0,duration:300})},getDetail:function(e){var t=this;this.isshowpage||this.$showLoading(),this.$newrequest.get("/coc-active/api/v2/maintain_meal/details/"+e).then((function(e){var n=[];e.data.bannerImage&&(n=e.data.bannerImage),e.data.bannerVideo?(n.unshift({url:e.data.bannerVideo,type:"video"}),t.autoPlay=!1):t.autoPlay=!0,t.swiperList=n,t.detail=e.data})).catch((function(e){})).finally((function(){t.isshowpage||(t.isshowpage=!0,t.$hideLoading())}))},buyBtn:function(){!0===(0,a.tologin)()&&e.navigateTo({url:"/pages/carShops/upkeep/submmitOrder?id="+this.detailId+"&customerManagerId="+this.customerManagerId+"&forwardUserId="+this.forwardUserId+"&isform="+this.isform})},goShop:function(t){this.isback||e.navigateTo({url:"/pages/carShops/4Sdetail/index?id="+t})}},onShareAppMessage:function(t){var n=this.detail.maintainName,o=this.detail.shareImage?this.detail.shareImage:this.detail.coverImg;return{title:n,path:"/pages/carShops/upkeep/detail?id="+this.detailId+"&forwardUserId="+this.forwardUserId+"&enter=117",imageUrl:o,success:function(t){e.showToast({title:"分享朋友成功"})},fail:function(t){e.showToast({title:"分享朋友失败",icon:"none"})}}},onShareTimeline:function(t){return{title:this.detail.maintainName,path:"/pages/carShops/upkeep/detail?id="+this.detailId+"&forwardUserId="+this.forwardUserId+"&enter=117",imageUrl:this.detail.shareImage?this.detail.shareImage:this.detail.coverImg,success:function(t){e.showToast({title:"分享朋友圈成功"})},fail:function(t){e.showToast({title:"分享朋友圈失败",icon:"none"})}}}};t.default=r}).call(this,n("543d")["default"])},e254:function(e,t,n){"use strict";var o=n("8243"),i=n.n(o);i.a},fa79:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o}));var o={uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"0f14"))},uParse:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-parse/u-parse")]).then(n.bind(null,"b3af"))},uToast:function(){return n.e("uni_modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,"1b13"))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,"8add"))}},i=function(){var e=this.$createElement,t=(this._self._c,this.isshowpage?this.swiperList.length:null);this.$mp.data=Object.assign({},{$root:{g0:t}})},s=[]}},[["1e39","common/runtime","common/vendor"]]]);