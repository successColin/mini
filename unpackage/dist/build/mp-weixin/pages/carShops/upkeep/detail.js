(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/carShops/upkeep/detail"],{2921:function(e,t,n){"use strict";var i=n("668b"),o=n.n(i);o.a},"668b":function(e,t,n){},"6f7d":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i}));var i={uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"f23e"))},uParse:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-parse/u-parse")]).then(n.bind(null,"5dcf"))},uToast:function(){return n.e("uni_modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,"4bf8"))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,"076f"))}},o=function(){var e=this.$createElement,t=(this._self._c,this.isshowpage?this.swiperList.length:null);this.$mp.data=Object.assign({},{$root:{g0:t}})},s=[]},"9fee":function(e,t,n){"use strict";(function(e,t){var i=n("4ea4");n("4319");i(n("66fd"));var o=i(n("a896"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},a896:function(e,t,n){"use strict";n.r(t);var i=n("6f7d"),o=n("bdf5");for(var s in o)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(s);n("2921");var a=n("f0c5"),r=Object(a["a"])(o["default"],i["b"],i["c"],!1,null,"38c4d46c",null,!1,i["a"],void 0);t["default"]=r.exports},bdf5:function(e,t,n){"use strict";n.r(t);var i=n("fc77"),o=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},fc77:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("7dcd"),o={components:{carousel:function(){Promise.all([n.e("common/vendor"),n.e("components/carousel/index")]).then(function(){return resolve(n("c969"))}.bind(null,n)).catch(n.oe)},Poster:function(){n.e("components/zhangyuhao-poster/Poster").then(function(){return resolve(n("dce9"))}.bind(null,n)).catch(n.oe)},commission:function(){n.e("components/commission/index").then(function(){return resolve(n("c47e"))}.bind(null,n)).catch(n.oe)},joinshopbtn:function(){n.e("components/joinshopbtn/index").then(function(){return resolve(n("28c1"))}.bind(null,n)).catch(n.oe)}},data:function(){return{showpopshare:!1,token:null,isExpert:null,swiperList:[],showtop:!1,isshowpage:!1,detail:{},detailId:"",autoPlay:!1,list:[],poster:"",forwardUserId:null,customerManagerId:"",iscommission:0,isback:!1}},onPageScroll:function(t){var n=this;e.getSystemInfo({success:function(e){t.scrollTop>300?n.showtop=!0:n.showtop=!1}})},onLoad:function(t){var n=this;t.iscommission&&(this.iscommission=t.iscommission),1==t.isapp&&(this.isback=!0),this.token=e.getStorageSync("token"),this.isExpert=e.getStorageSync("isExpert"),t.customerManagerId&&(this.customerManagerId=t.customerManagerId),t.id&&(this.detailId=t.id),t.forwardUserId&&(this.forwardUserId=t.forwardUserId,e.getStorageSync("token")?e.getStorageSync("token")&&1!=e.getStorageSync("isExpert")&&this.tempparentid():(0,i.tologin)()),t.scene&&(this.detailId=t.scene.split("_")[0],this.forwardUserId=t.scene.split("_")[1],e.getStorageSync("token")?e.getStorageSync("token")&&1!=e.getStorageSync("isExpert")&&this.tempparentid():(0,i.tologin)()),this.forwardUserId||(this.forwardUserId=(0,i.getstorage)("userId")),e.$on("saveaddshop",(function(e){n.getDetail(n.detailId)})),this.getDetail(this.detailId)},onShow:function(){this.forwardUserId&&e.getStorageSync("token")&&this.tempparentid(),this.getDetail(this.detailId)},onUnload:function(){this.isback&&(window._51club&&window._51club.backIntercept("app"),window.webkit.messageHandlers&&window.webkit.messageHandlers.backIntercept.postMessage("app"))},methods:{tempparentid:function(){this.$request.post("/coc-active/api/v1/invite/temp_parent_id/add",{tempParentId:this.forwardUserId}).then((function(e){}))},posterSuccess:function(e){this.poster=e},OnSaveImage:function(){var t=[this.poster];e.previewImage({current:99999,urls:t,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(e){console.log("选中了第"+(e.tapIndex+1)+"个按钮,第"+(e.index+1)+"张图片")},fail:function(e){console.log(e.errMsg)}}})},OnCloseShare:function(){this.showpopshare=!1},popposter:function(){var t=this;if(!e.getStorageSync("token"))return(0,i.tologin)(),!1;this.$request.post("/coc-active/api/v1/invite/getMiniProgramQrCode",{page:"pages/carShops/upkeep/detail",scene:this.detailId+"_"+this.forwardUserId}).then((function(e){t.showpopshare=!0,t.list=[{type:"image",path:t.detail.posterFigureUrl,x:0,y:0,width:443,height:787},{type:"image",path:e.data.qrCode,x:18,y:682,width:90,height:90}],t.$nextTick((function(){t.$refs.poster.create()}))}))},Oncopy:function(t){e.setClipboardData({data:t,success:function(){e.$u.toast("复制成功")}})},ClickZhiDing:function(){e.pageScrollTo({scrollTop:0,duration:300})},getDetail:function(e){var t=this;this.isshowpage||this.$showLoading(),this.$newrequest.get("/coc-active/api/v2/maintain_meal/details/"+e).then((function(e){var n=[];e.data.bannerImage&&(n=e.data.bannerImage),e.data.bannerVideo?(n.unshift({url:e.data.bannerVideo,type:"video"}),t.autoPlay=!1):t.autoPlay=!0,t.swiperList=n,t.detail=e.data})).catch((function(e){})).finally((function(){t.isshowpage||(t.isshowpage=!0,t.$hideLoading())}))},buyBtn:function(){!0===(0,i.tologin)()&&e.navigateTo({url:"/pages/carShops/upkeep/submmitOrder?id="+this.detailId+"&customerManagerId="+this.customerManagerId+"&forwardUserId="+this.forwardUserId})},goShop:function(t){this.isback||e.navigateTo({url:"/pages/carShops/4Sdetail/index?id="+t})}},onShareAppMessage:function(t){var n=this.detail.maintainName,i=this.detail.shareImage?this.detail.shareImage:this.detail.coverImg;return{title:n,path:"/pages/carShops/upkeep/detail?id="+this.detailId+"&forwardUserId="+this.forwardUserId,imageUrl:i,success:function(t){e.showToast({title:"分享朋友成功"})},fail:function(t){e.showToast({title:"分享朋友失败",icon:"none"})}}},onShareTimeline:function(t){return{title:this.detail.maintainName,path:"/pages/carShops/upkeep/detail?id="+this.detailId+"&forwardUserId="+this.forwardUserId,imageUrl:this.detail.shareImage?this.detail.shareImage:this.detail.coverImg,success:function(t){e.showToast({title:"分享朋友圈成功"})},fail:function(t){e.showToast({title:"分享朋友圈失败",icon:"none"})}}}};t.default=o}).call(this,n("543d")["default"])}},[["9fee","common/runtime","common/vendor"]]]);