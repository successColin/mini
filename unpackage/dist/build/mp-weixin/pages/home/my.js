(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/my"],{"38eb":function(e,t,s){"use strict";(function(e,t){var i=s("4ea4");s("76b1");i(s("66fd"));var n=i(s("6928"));e.__webpack_require_UNI_MP_PLUGIN__=s,t(n.default)}).call(this,s("bc2e")["default"],s("543d")["createPage"])},"4c6f":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i}));var i={uIcon:function(){return Promise.all([s.e("common/vendor"),s.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(s.bind(null,"0f14"))},uAvatar:function(){return Promise.all([s.e("common/vendor"),s.e("uni_modules/uview-ui/components/u-avatar/u-avatar")]).then(s.bind(null,"d838"))},uTabs:function(){return Promise.all([s.e("common/vendor"),s.e("uni_modules/uview-ui/components/u-tabs/u-tabs")]).then(s.bind(null,"db9b"))},uSwiper:function(){return Promise.all([s.e("common/vendor"),s.e("uni_modules/uview-ui/components/u-swiper/u-swiper")]).then(s.bind(null,"d76a"))},uNoticeBar:function(){return Promise.all([s.e("common/vendor"),s.e("uni_modules/uview-ui/components/u-notice-bar/u-notice-bar")]).then(s.bind(null,"1e2f"))},uModal:function(){return Promise.all([s.e("common/vendor"),s.e("uni_modules/uview-ui/components/u-modal/u-modal")]).then(s.bind(null,"ba5d"))}},n=function(){var e=this,t=e.$createElement,s=(e._self._c,e.__map(e.userDec,(function(t,s){var i=e.__get_orig(t),n=e.userDecNum(t.id)||0;return{$orig:i,m0:n}}))),i=e.isExpertCopOk?e.noticeList.length:null;e.$mp.data=Object.assign({},{$root:{l0:s,g0:i}})},a=[]},6928:function(e,t,s){"use strict";s.r(t);var i=s("4c6f"),n=s("e897");for(var a in n)["default"].indexOf(a)<0&&function(e){s.d(t,e,(function(){return n[e]}))}(a);s("be05");var o=s("f0c5"),r=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"13ad2df9",null,!1,i["a"],void 0);t["default"]=r.exports},"88fa":function(e,t,s){},be05:function(e,t,s){"use strict";var i=s("88fa"),n=s.n(i);n.a},e897:function(e,t,s){"use strict";s.r(t);var i=s("f38e"),n=s.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){s.d(t,e,(function(){return i[e]}))}(a);t["default"]=n.a},f38e:function(e,t,s){"use strict";(function(e){var i=s("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=i(s("2eee")),o=i(s("9523")),r=i(s("c973")),u=s("ed1a"),c=s("04ff"),d=(n={onPageScroll:function(e){e.scrollTop>10?this.isShowTop=!0:this.isShowTop=!1},components:{tabbar:function(){Promise.all([s.e("common/vendor"),s.e("components/tabbar/index")]).then(function(){return resolve(s("a91c"))}.bind(null,s)).catch(s.oe)},square:function(){s.e("pages/home/components/square").then(function(){return resolve(s("fb7d"))}.bind(null,s)).catch(s.oe)}},created:function(){var t=this;e.getSystemInfo({success:function(s){var i=s.windowWidth,n=s.windowHeight;t.x=i-e.upx2px(140),t.y=n-e.upx2px(340)}})},onPullDownRefresh:function(){this.init(),setTimeout((function(){e.stopPullDownRefresh()}),1e3)},onShow:function(){this.init()},data:function(){return{x:0,y:0,shopAccountType:0,showmodal:!1,isShowTop:!1,shopName:"",shopType:0,rankList:[],hotList:[],show:!0,current:0,tabbarHeight:0,showsetheadimg:!1,swiperList:["https://oss.dcqcjlb.com/51che_java_dev/20231226/file_1703580554627.jpg","https://oss.dcqcjlb.com/51che_java_dev/20231226/file_1703580572595.jpg","https://oss.dcqcjlb.com/51che_java_dev/20231226/file_1703580583029.jpg","https://oss.dcqcjlb.com/51che_java_dev/20231226/file_1703580594702.jpg","https://oss.dcqcjlb.com/51che_java_dev/20231226/file_1703580605627.jpg","https://oss.dcqcjlb.com/51che_java_dev/20231226/file_1703580615600.jpg"],userDec:[{name:"作品",id:0},{name:"关注",id:1},{name:"粉丝",id:2},{name:"获赞",id:3}],featureArr:[{name:"我的订单",icon:"https://oss.dcqcjlb.com/51che_java_dev/20231213/file_1702450810046.png",id:0},{name:"我的积分",icon:"https://oss.dcqcjlb.com/51che_java_dev/20231213/file_1702450831594.png",id:1},{name:"我的卡券",icon:"https://oss.dcqcjlb.com/51che_java_dev/20231213/file_1702450844193.png",id:2},{name:"我的爱车",icon:"https://oss.dcqcjlb.com/51che_java_dev/20231213/file_1702450857556.png",id:3},{name:"信用卡",icon:"https://oss.dcqcjlb.com/51che_java_dev/20231213/file_1702450871197.png",id:4}],masterTabs:[{name:"邀请达人",url:"https://oss.dcqcjlb.com/51che_java_dev/20231214/file_1702551183445.png",id:0},{name:"邀请商家",url:"https://oss.dcqcjlb.com/51che_java_dev/20231214/file_1702551043831.png",id:1},{name:"流量扶持",url:"https://oss.dcqcjlb.com/51che_java_dev/20231214/file_1702551206948.png",id:2},{name:"创作中心",url:"https://oss.dcqcjlb.com/51che_java_dev/20231214/file_1702551221570.png",id:3},{name:"活动发布",url:"https://oss.dcqcjlb.com/51che_java_dev/20231214/file_1702551235410.png",id:4}],noticeList:[],tabsList:[{name:"升级达人"},{name:"商家入驻"}],dataList:{collectionsCount:0,couponCount:0,redCount:0,maintainCount:0,score:0},squarerows:{list:[],total:0},istoken:!1,detail:{},roadVip:0,roadVipExp:"",finduserList:{}}}},(0,o.default)(n,"components",{}),(0,o.default)(n,"computed",{masterLabel:function(){var e,t,s=(null===(e=this.finduserList)||void 0===e||null===(t=e.userExpert)||void 0===t?void 0:t.tags)||"";return s?s.split(","):[]},grade:function(){var e,t;return null===(e=this.finduserList)||void 0===e||null===(t=e.userExpert)||void 0===t?void 0:t.grade},gradeVal:function(){var e=this.grade;console.log(this.finduserList);var t="";return 1==e?t="https://oss.dcqcjlb.com/51che_java_dev/20231225/file_1703464940037.png":2==e?t="https://oss.dcqcjlb.com/51che_java_dev/20231225/file_1703464991430.png":3==e?t="https://oss.dcqcjlb.com/51che_java_dev/20231225/file_1703465004561.png":4==e?t="https://oss.dcqcjlb.com/51che_java_dev/20231225/file_1703465019695.png":5==e&&(t="https://oss.dcqcjlb.com/51che_java_dev/20231225/file_1703465031744.png"),t},isadmission:function(){var e,t,s,i;return 1===this.shopAccountType&&(1===(null===(e=this.finduserList)||void 0===e||null===(t=e.shop)||void 0===t?void 0:t.status)&&1===(null===(s=this.finduserList)||void 0===s||null===(i=s.shop)||void 0===i?void 0:i.unionPayStatus))},isExpertCopOk:function(){var e;return""!==this.istoken&&1===(null===(e=this.dataList)||void 0===e?void 0:e.isExpert)},isExpertCop:function(){var e;return""!==this.istoken&&1!==(null===(e=this.dataList)||void 0===e?void 0:e.isExpert)},statusBarHeight:function(){return u.statusBarHeight},top:function(){return"calc(".concat(u.statusBarHeight," + 88rpx)")},getscore:function(){return function(e){if(e>=1e4){var t;return t=e/1e4,t+"W"}return e}},userDecNum:function(){return function(e){var t,s,i,n;return 0===e?null===(t=this.dataList)||void 0===t?void 0:t.articleCount:1===e?null===(s=this.detail)||void 0===s?void 0:s.followNum:2===e?null===(i=this.detail)||void 0===i?void 0:i.fansNum:3===e?null===(n=this.detail)||void 0===n?void 0:n.likeNum:void 0}}}),(0,o.default)(n,"watch",{}),(0,o.default)(n,"mounted",(function(){})),(0,o.default)(n,"onReachBottom",(function(){e.$emit("myScrollToLower")})),(0,o.default)(n,"methods",{handleJumpMy:function(){e.navigateTo({url:"/pages/wiseman/darenxiaodian/index"})},joinShop:function(){e.navigateTo({url:"/pages/roadhelp/index?iscommission=1"})},handleJumpGrade:function(){e.navigateTo({url:"/pages/my/growthCenter/index"})},init:function(){var t=this;e.getLocation({type:"wgs84",success:function(e){console.log("当前位置的经度："+e.longitude),console.log("当前位置的纬度："+e.latitude),(0,c.setstorage)("lat",e.latitude),(0,c.setstorage)("lng",e.longitude)}}),this.shoptypeid=(0,c.getstorage)("shopTypeId"),this.istoken=(0,c.gettoken)(),this.istoken?this.getinfo():(this.dataList={},this.shopAccountType=0,this.finduserList={},this.detail={}),e.getStorageSync("token")&&this.$request.post("/coc-active/api/v1/user/behavior/visit_into",{type:15}).then((function(e){t.visitinto=e}))},handleGrossIncome:function(){e.navigateTo({url:"/pages/myEarnings/mainPage"})},handleJumpEarnings:function(){e.navigateTo({url:"/pages/wiseman/specialarea/order"})},Ontruemodal:function(){this.showmodal=!1},getSquareList:function(){var e=this;return(0,r.default)(a.default.mark((function t(){var s,i,n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$request.post("/coc-active/api/v1/expert/selection/library/expert/list",{current:1,size:5,sort:8});case 2:s=t.sent,i=s.data,n=[],i.records.forEach((function(e){e.type_txt=1===e.type?"活":2===e.type?"保":3===e.type?"救":4===e.type?"团":5===e.type?"套":"",n.push(e)})),e.squarerows.list=n,e.squarerows.total=i.total;case 8:case"end":return t.stop()}}),t)})))()},queryRankingList:function(t){var s=this;this.$newrequest.post("/coc-merchant-app/app/v2/home_page/merchant/power/list",{type:t}).then((function(i){200===i.code?5===t?s.rankList=i.data:6===t&&(s.hotList=i.data):e.showToast({title:i.message,icon:"none",duration:2e3})}))},queryNoticeList:function(){var t=this;this.$newrequest.post("/coc-active/api/v1/newExpert/untruthBroadcastMessageList",{current:1,size:99,displayLocation:1}).then((function(s){200===s.code?t.noticeList=s.data.map((function(e){return e.content})):e.showToast({title:s.message,icon:"none",duration:2e3})}))},handleGoWithdraw:function(){var t,s=this;(null===(t=this.dataList)||void 0===t?void 0:t.balance)>50?this.$request.post("/coc-active/api/v2/withdraw/getWithdrawBaseInfo").then((function(t){var i;if(200!==t.code)return e.$u.toast(t.message);e.navigateTo({url:"/pages/myEarnings/InitiatePayout?balance="+(null===(i=s.dataList)||void 0===i?void 0:i.balance)})})):e.$u.toast("余额大于50才能提现")},handleClickMasterTabs:function(t){0===t?e.navigateTo({url:"/pages/wiseman/specialarea/myteam"}):1===t?e.navigateTo({url:"/pages/wiseman/recommended_merchants"}):2===t?e.navigateTo({url:"/pages/wiseman/flowplan/index"}):3===t?e.navigateTo({url:"/pages/wiseman/specialarea/creative_center"}):4===t&&e.showToast({icon:"none",title:"开发中"})},handleAdmission:function(){if(!0===(0,c.tologin)()){if(!(0,c.getstorage)("lat"))return this.showmodal=!0,!1;if(null==this.finduserList.shop)e.navigateTo({url:"/pages/Settlein/welcomevue"});else if(4==this.finduserList.shop.unionPayStatus&&0==this.finduserList.shop.status)1==this.finduserList.shop.bankAcctType&&e.navigateTo({url:"/pages/Settlein/enterpriseProgress?type=1&isLineLedger="+this.finduserList.shop.isLineLedger+"&settleType="+this.finduserList.shop.settleType});else if(0==this.finduserList.shop.status){var t;if(1==this.finduserList.shop.bankAcctType)e.navigateTo({url:"/pages/Settlein/enterpriseProgress?type=2&isLineLedger="+this.finduserList.shop.isLineLedger+"&settleType="+this.finduserList.shop.settleType});else e.navigateTo({url:"/pages/Settlein/individualProgress?type=2&isLineLedger=".concat(this.finduserList.shop.isLineLedger,"&settleType=").concat(this.finduserList.shop.settleType,"&umsRegId=").concat(null===(t=this.finduserList.shop)||void 0===t?void 0:t.umsRegId)})}else if(1==this.finduserList.shop.status){var s;if(1==this.finduserList.shop.bankAcctType)e.navigateTo({url:"/pages/Settlein/enterpriseProgress?type=3&isLineLedger="+this.finduserList.shop.isLineLedger+"&settleType="+this.finduserList.shop.settleType});else e.navigateTo({url:"/pages/Settlein/individualProgress?type=3&isLineLedger=".concat(this.finduserList.shop.isLineLedger,"&settleType=").concat(this.finduserList.shop.settleType,"&umsRegId=").concat(null===(s=this.finduserList.shop)||void 0===s?void 0:s.umsRegId)})}else if(2==this.finduserList.shop.status){var i;if(1==this.finduserList.shop.bankAcctType)e.navigateTo({url:"/pages/Settlein/enterpriseProgress?type=4&auditReason="+this.finduserList.shop.auditReason+"&unionPayStatus="+this.finduserList.shop.unionPayStatus+"&isLineLedger="+this.finduserList.shop.isLineLedger+"&status="+this.finduserList.shop.status+"&settleType="+this.finduserList.shop.settleType});else e.navigateTo({url:"/pages/Settlein/individualProgress?type=4&auditReason=".concat(this.finduserList.shop.auditReason,"\n              &unionPayStatus=").concat(this.finduserList.shop.unionPayStatus,"&isLineLedger=").concat(this.finduserList.shop.isLineLedger,"\n              &status=").concat(this.finduserList.shop.status,"&settleType=").concat(this.finduserList.shop.settleType,"&umsRegId=").concat(null===(i=this.finduserList.shop)||void 0===i?void 0:i.umsRegId)})}}},handleJumpMaster:function(){!0===(0,c.tologin)()&&this.$request.post("/coc-active/api/v1/expert/echoVerify").then((function(t){1101==t.code?e.navigateTo({url:"/pages/wiseman/welcome"}):1==t.data.status?e.navigateTo({url:"/pages/wiseman/applying"}):3==t.data.status&&e.navigateTo({url:"/pages/wiseman/refuse"})}))},handleEquity:function(){e.navigateTo({url:"/pages/roadhelp/equity"})},handleRescue:function(){e.navigateTo({url:"/pages/roadhelp/index/index"})},queryHome:function(){var e=this;this.$newrequest.post("/coc-active/api/v1/newExpert/expertIndex").then((function(t){200===t.code&&(e.detail=t.data)}))},handleUserDec:function(t){!0===(0,c.tologin)()&&(0!==t&&3!==t||e.navigateTo({url:"/pages/wiseman/mywork"}),1===t&&e.navigateTo({url:"/pages/wiseman/specialarea/myfriends?type=1"}),2===t&&e.navigateTo({url:"/pages/wiseman/specialarea/myfriends?type=2"}))},handleFeature:function(t){!0===(0,c.tologin)()&&(0===t&&e.navigateTo({url:"/pages/my/OrderGoods/index"}),1===t&&e.navigateTo({url:"/pages/my/integral/index"}),2===t&&e.navigateTo({url:"/pages/my/myorder/couponpackage?type=1"}),3===t&&e.navigateTo({url:"/pages/my/mycar/index"}),4===t&&e.navigateTo({url:"/pages/my/card/index"}))},handleTabs:function(e){this.current=e.index},Onpushloadhelp:function(){!0===(0,c.tologin)()&&e.navigateTo({url:"/pages/roadhelp/index"})},handleClick:function(){(0,c.tologin)()},toMessage:function(){!0===(0,c.tologin)()&&e.navigateTo({url:"/pages/wiseman/specialarea/message"})},OnPushSetInfo:function(){!0===(0,c.tologin)()&&e.navigateTo({url:"/pages/my/info/index"})},handleCopy:function(){e.setClipboardData({data:"https://a.app.qq.com/o/simple.jsp?pkgname=com.dsrz.skystore",success:function(){e.$u.toast("复制成功,请在浏览器打开")}})},getinfo:function(){var e=this;this.$request.get("/coc-my/api/v1/my/findUser").then((function(t){e.roadVip=t.data.user.roadVip,e.roadVipExp=t.data.user.roadVipExp,e.shopAccountType=t.data.user.shopAccountType,console.log(11111111111,t.data,t),e.finduserList=t.data,(0,c.setstorage)("headImg",t.data.user.headImg),(0,c.setstorage)("nickname",t.data.user.nickname),(0,c.setstorage)("userType",t.data.user.userType),(0,c.setstorage)("userId",t.data.user.id),(0,c.setstorage)("isCertify",t.data.user.isCertify),(0,c.setstorage)("realName",t.data.user.realName),(0,c.setstorage)("mobile",t.data.user.mobile),null==t.data.shop?((0,c.setstorage)("status",null),(0,c.setstorage)("shopId",null),(0,c.setstorage)("shopName",null),(0,c.setstorage)("shopTypeId",0),(0,c.setstorage)("shopType",null)):((0,c.setstorage)("status",t.data.shop.status),(0,c.setstorage)("shopId",t.data.shop.id),(0,c.setstorage)("shopName",t.data.shop.shopName),(0,c.setstorage)("shopTypeId",t.data.shop.shopTypeId),(0,c.setstorage)("shopType",t.data.shop.status),t.data.shop&&(e.shopType=1,e.shopName="入驻中",1===t.data.shop.unionPayStatus&&1===t.data.shop.status&&(e.shopName=t.data.shop.shopName))),e.$request.post("/coc-active/api/v1/my/index").then((function(t){(0,c.setstorage)("isExpert",t.data.isExpert),e.dataList=t.data,1==t.data.isDefaultAvatar&&(0,c.tologin)()&&(e.showsetheadimg=!0)})),e.queryNoticeList(),e.queryRankingList(5),e.queryRankingList(6),e.getSquareList(),e.queryHome()}))}}),n);t.default=d}).call(this,s("543d")["default"])}},[["38eb","common/runtime","common/vendor"]]]);