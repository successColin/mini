(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/grouppurchase/order/list"],{"0e35":function(t,e,n){"use strict";n.r(e);var o=n("477d"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},"422c":function(t,e,n){"use strict";var o=n("76dc"),a=n.n(o);a.a},"477d":function(t,e,n){"use strict";(function(t){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("84c4")),i={components:{},data:function(){return{showpop:!1,tabs:[{label:"全部",value:null},{label:"待付款",value:0},{label:"待核销",value:1},{label:"已退款",value:4}],type:0,status:null,current:1,dataList:[],isLoadMore:!1,signUpId:0,poptitle:"",orderType:null}},onLoad:function(){},onShow:function(){this.isLoadMore=!1,this.current=1,this.getList()},onReachBottom:function(){this.isLoadMore||(this.current++,this.getList())},methods:{confirm:function(){var e=this;5==this.orderType?this.$request.post("/coc-active/api/v1/merchant_meal_order/cancel",{id:this.signUpId}).then((function(n){if(200==n.code){t.showToast({title:"取消订单成功"});var o=e.dataList.findIndex((function(t){return t.orderId==e.signUpId}));e.dataList[o].status=5,e.dataList[o].statusMsg="已取消",e.showpop=!1}else e.$refs.uToast.show({message:n.message})})):this.$request.get("/coc-active/api/v1/group_purchase/cancelOrder/"+this.signUpId).then((function(n){if(200==n.code){t.showToast({title:"取消订单成功"});var o=e.dataList.findIndex((function(t){return t.orderId==e.signUpId}));e.dataList[o].status=5,e.dataList[o].statusMsg="已取消",e.showpop=!1}else e.$refs.uToast.show({message:n.message})}))},signupfalse:function(t){this.signUpId=t.orderId,this.poptitle=t.title,this.orderType=t.orderType,this.showpop=!0},getcountdown:function(t){return(0,a.default)(t).add(5,"minute").toDate().getTime()-(new Date).getTime()},OnDetail:function(e){5==e.orderType?t.navigateTo({url:"/pages/grouppurchase/packageorder/detail?id="+e.orderId}):t.navigateTo({url:"/pages/grouppurchase/order/detail?id="+e.orderId})},getList:function(){var t=this;this.$request.post("/coc-active/api/v1/group_purchase/orderTabulation",{size:20,current:this.current,status:this.status}).then((function(e){e.data.records.forEach((function(t){t.iscountdown=!1})),e.data.records.length<20&&(t.isLoadMore=!0),1==e.data.current?t.dataList=e.data.records:e.data.records.filter((function(e){t.dataList.push(e)}))}))},changetab:function(t,e){this.type=e,this.status=t.value,this.isLoadMore=!1,this.current=1,this.dataList=[],this.getList()},setcountdown:function(t){this.dataList[t].iscountdown=!0}}};e.default=i}).call(this,n("543d")["default"])},"76dc":function(t,e,n){},"77b2":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={uAvatar:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-avatar/u-avatar")]).then(n.bind(null,"d838"))},uCountDown:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-count-down/u-count-down")]).then(n.bind(null,"cda7"))},uModal:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-modal/u-modal")]).then(n.bind(null,"ba5d"))}},a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.dataList.length),o=n>0?t.__map(t.dataList,(function(e,n){var o=t.__get_orig(e),a=0!=e.status||e.iscountdown?null:t.getcountdown(e.createdAt);return{$orig:o,m0:a}})):null;t._isMounted||(t.e0=function(e){t.showpop=!1}),t.$mp.data=Object.assign({},{$root:{g0:n,l0:o}})},i=[]},df18:function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("76b1");o(n("66fd"));var a=o(n("ec78"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},ec78:function(t,e,n){"use strict";n.r(e);var o=n("77b2"),a=n("0e35");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("422c");var s=n("f0c5"),u=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=u.exports}},[["df18","common/runtime","common/vendor"]]]);