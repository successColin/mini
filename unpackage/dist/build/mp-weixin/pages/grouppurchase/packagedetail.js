(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/grouppurchase/packagedetail"],{"1fa0":function(t,e,i){"use strict";var n=i("7057"),s=i.n(n);s.a},7057:function(t,e,i){},7364:function(t,e,i){"use strict";i.r(e);var n=i("da1f"),s=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=s.a},cd77:function(t,e,i){"use strict";(function(t,e){var n=i("4ea4");i("4319");n(i("66fd"));var s=n(i("fde0"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(s.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},da1f:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("7dcd"),s={components:{carousel:function(){Promise.all([i.e("common/vendor"),i.e("components/carousel/index")]).then(function(){return resolve(i("c969"))}.bind(null,i)).catch(i.oe)},Poster:function(){i.e("components/zhangyuhao-poster/Poster").then(function(){return resolve(i("dce9"))}.bind(null,i)).catch(i.oe)},commission:function(){i.e("components/commission/index").then(function(){return resolve(i("c47e"))}.bind(null,i)).catch(i.oe)},joinshopbtn:function(){i.e("components/joinshopbtn/index").then(function(){return resolve(i("28c1"))}.bind(null,i)).catch(i.oe)}},data:function(){return{imgList:[],id:"",dataList:{},showpopshare:!1,poster:"",list:[],forwardUserId:null,isshowpage:!1,iscommission:0,token:null,isExpert:null}},destroyed:function(){t.$off("saveaddshop")},onLoad:function(e){var i=this;this.id=e.id,e.iscommission&&(this.iscommission=e.iscommission),e.forwardUserId&&(this.forwardUserId=e.forwardUserId,t.getStorageSync("token")?t.getStorageSync("token")&&1!=t.getStorageSync("isExpert")&&this.tempparentid():(0,n.tologin)()),e.scene&&(this.id=e.scene.split("_")[0],this.forwardUserId=e.scene.split("_")[1],t.getStorageSync("token")?t.getStorageSync("token")&&1!=t.getStorageSync("isExpert")&&this.tempparentid():(0,n.tologin)()),this.forwardUserId||(this.forwardUserId=(0,n.getstorage)("userId")),this.token=t.getStorageSync("token"),this.isExpert=t.getStorageSync("isExpert"),this.getList(),t.$on("saveaddshop",(function(t){i.getList()}))},onShareTimeline:function(e){if(!t.getStorageSync("token"))return(0,n.tologin)(),!1;var i=this.dataList.title,s=this.dataList.appletsSharePic?this.dataList.appletsSharePic:this.dataList.coverPicture;return{title:i,path:"/pages/grouppurchase/packagedetail?forwardUserId="+this.forwardUserId+"&id="+this.id,imageUrl:s}},onShareAppMessage:function(e){if(!t.getStorageSync("token"))return(0,n.tologin)(),!1;var i=this.dataList.title,s=this.dataList.appletsSharePic?this.dataList.appletsSharePic:this.dataList.coverPicture;return{title:i,path:"/pages/grouppurchase/packagedetail?forwardUserId="+this.forwardUserId+"&id="+this.id,imageUrl:s}},methods:{tempparentid:function(){this.$request.post("/coc-active/api/v1/invite/temp_parent_id/add",{tempParentId:this.forwardUserId}).then((function(t){}))},getList:function(){var t=this;this.isshowpage||this.$showLoading(),this.$newrequest.post("/coc-merchant-app/app/v2/order_management/merchantMealDetails",{id:this.id}).then((function(e){var i=[];if(e.data.adUrl){var n=e.data.adUrl.split(",");n.forEach((function(t){i.push({url:t,type:"image"})})),t.imgList=i}t.dataList=e.data})).finally((function(){t.isshowpage||(t.isshowpage=!0,t.$hideLoading())}))},Onaddcollections:function(){(0,n.tologin)(),2==this.dataList.isCollection?this.dataList.isCollection=1:this.dataList.isCollection=2,(0,n.getstorage)("token")&&this.$request.post("/coc-active/api/v1/collections/add_collections",{type:"4",relId:this.dataList.id,relName:this.dataList.shopName,activityMoney:this.dataList.flashSalePrice}).then((function(t){if(200==t.code);}))},OnCloseShare:function(){this.showpopshare=!1},popposter:function(){var e=this;if(!t.getStorageSync("token"))return(0,n.tologin)(),!1;this.$request.post("/coc-active/api/v1/invite/getMiniProgramQrCode",{page:"pages/grouppurchase/packagedetail",scene:this.id+"_"+this.forwardUserId}).then((function(t){e.showpopshare=!0,e.list=[{type:"image",path:e.dataList.posterFigureUrl,x:0,y:0,width:443,height:787},{type:"image",path:t.data.qrCode,x:18,y:682,width:90,height:90}],e.$nextTick((function(){e.$refs.poster.create()}))}))},posterSuccess:function(t){this.poster=t},Oncopy:function(e){t.setClipboardData({data:e,success:function(){t.$u.toast("复制成功")}})},OnSaveImage:function(){var e=[this.poster];t.previewImage({current:99999,urls:e,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(t){console.log("选中了第"+(t.tapIndex+1)+"个按钮,第"+(t.index+1)+"张图片")},fail:function(t){console.log(t.errMsg)}}})},Onsingup:function(){var e=this;t.navigateTo({url:"/pages/grouppurchase/packagepayindex?istype=wx&forwardUserId="+this.forwardUserId,success:function(t){t.eventChannel.emit("getinfo",{data:e.dataList}),e.showpop=!1}})},OnPushMap:function(){t.openLocation({latitude:this.dataList.lat,longitude:this.dataList.lng,success:function(){console.log("success")}})},OnPushshopHome:function(){t.navigateTo({url:"/pages/activityMall/business/index?id="+this.dataList.shopId})}}};e.default=s}).call(this,i("543d")["default"])},f2cf:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uParse:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-parse/u-parse")]).then(i.bind(null,"5dcf"))},uPopup:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(i.bind(null,"076f"))}},s=function(){var t=this.$createElement,e=(this._self._c,this.isshowpage?this.imgList.length:null);this.$mp.data=Object.assign({},{$root:{g0:e}})},o=[]},fde0:function(t,e,i){"use strict";i.r(e);var n=i("f2cf"),s=i("7364");for(var o in s)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(o);i("1fa0");var a=i("f0c5"),r=Object(a["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=r.exports}},[["cd77","common/runtime","common/vendor"]]]);