require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/roadhelp/payindex"],{"05db":function(e,t,n){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("04ff"),o={components:{},data:function(){return{commission:89.9,mobile:"",name:"",user:{},customerManagerId:"",shareId:"",orderId:"",lockin:!0,sourceType:null,affiliationType:null,formType:1}},onLoad:function(t){(0,a.tologin)(),2===t.formType&&(this.formType=t.formType),e.getStorageSync("commission")&&(this.commission=e.getStorageSync("commission")),this.getList(),this.mobile=e.getStorageSync("mobile"),this.name=e.getStorageSync("realName"),console.log(t),t.shareId&&(this.shareId=t.shareId),t.customerManagerId&&(this.customerManagerId=t.customerManagerId),t.sourceType&&(this.sourceType=t.sourceType),t.affiliationType&&(this.affiliationType=t.affiliationType)},onShow:function(){},methods:{wxpay:function(t){var n=this;e.requestPayment({provider:"wxpay",timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign,appid:t.appId,success:function(t){e.showToast({icon:"success",title:"支付成功",complete:function(){2===n.formType?i.navigateBack({delta:getCurrentPages().length}):e.redirectTo({url:"/pages/roadhelp/successpay"})}})}})},nextpay:function(){var t=this,n={};if(n.mobile=this.mobile,n.name=this.name,n.payType=5,n.subOpenId=e.getStorageSync("openid"),n.forwardUserId=this.shareId,console.log(this.customerManagerId,this.sourceType,this.affiliationType),this.customerManagerId&&(n.customerManagerId=this.customerManagerId),this.sourceType&&(n.sourceType=this.sourceType),this.affiliationType&&(n.affiliationType=this.affiliationType),this.shareId&&(n.shareId=this.shareId),!this.lockin)return!1;this.lockin=!1,this.$request.post("/coc-active/api/v1/sky_you_service/order/orderPayment",n).then((function(n){200==n.code?(t.lockin=!0,t.orderId=n.data.orderId,t.wxpay(n.data.payment.miniPayRequest)):e.$u.toast(n.message)}))},OnToPay:function(){var t=this;e.requestSubscribeMessage({tmplIds:["EDPZBi96qqYOHGorQC2raNQYmW-DX85vtPjpf9RRPIE","7hWjRBvg3ovr8g8JufBvXVk813lh9A4A534plStdxUw"],complete:function(e){t.nextpay()}})},getList:function(){var e=this;this.$request.get("/coc-my/api/v1/my/findUser").then((function(t){e.user=t.data.user}))}}};t.default=o}).call(this,n("543d")["default"],n("bc2e")["default"])},"802e":function(e,t,n){"use strict";n.r(t);var i=n("05db"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},"97c9":function(e,t,n){"use strict";var i=n("c489"),a=n.n(i);a.a},baa7:function(e,t,n){"use strict";(function(e,t){var i=n("4ea4");n("76b1");i(n("66fd"));var a=i(n("fda7"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},c489:function(e,t,n){},ee90:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={uDivider:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-divider/u-divider")]).then(n.bind(null,"944a"))}},a=function(){var e=this.$createElement;this._self._c},o=[]},fda7:function(e,t,n){"use strict";n.r(t);var i=n("ee90"),a=n("802e");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("97c9");var r=n("f0c5"),s=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=s.exports}},[["baa7","common/runtime","common/vendor"]]]);