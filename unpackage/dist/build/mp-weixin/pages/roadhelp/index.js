require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/roadhelp/index"],{"0acc":function(e,t,s){"use strict";s.r(t);var n=s("9968"),i=s("1dda");for(var o in i)["default"].indexOf(o)<0&&function(e){s.d(t,e,(function(){return i[e]}))}(o);s("23f6"),s("cb9d");var a=s("f0c5"),r=Object(a["a"])(i["default"],n["b"],n["c"],!1,null,"1f53a2ea",null,!1,n["a"],void 0);t["default"]=r.exports},"1dda":function(e,t,s){"use strict";s.r(t);var n=s("ffb5"),i=s.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){s.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},"23f6":function(e,t,s){"use strict";var n=s("b0f1"),i=s.n(n);i.a},"66e8":function(e,t,s){"use strict";(function(e,t){var n=s("4ea4");s("76b1");n(s("66fd"));var i=n(s("0acc"));e.__webpack_require_UNI_MP_PLUGIN__=s,t(i.default)}).call(this,s("bc2e")["default"],s("543d")["createPage"])},9968:function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return n}));var n={uPopup:function(){return Promise.all([s.e("common/vendor"),s.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(s.bind(null,"8add"))},uPicker:function(){return Promise.all([s.e("common/vendor"),s.e("uni_modules/uview-ui/components/u-picker/u-picker")]).then(s.bind(null,"b61f"))}},i=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showfourshop=!1},e.e1=function(t){e.showfirst=!1},e.e2=function(t){e.showtwo=!1})},o=[]},"99c0":function(e,t,s){},b0f1:function(e,t,s){},cb9d:function(e,t,s){"use strict";var n=s("99c0"),i=s.n(n);i.a},ffb5:function(e,t,s){"use strict";(function(e){var n=s("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(s("2eee")),o=n(s("448a")),a=n(s("c973")),r=s("04ff"),c={components:{Poster:function(){s.e("components/zhangyuhao-poster/Poster").then(function(){return resolve(s("8293"))}.bind(null,s)).catch(s.oe)},cardauthentication:function(){s.e("components/cardauthentication").then(function(){return resolve(s("fc50"))}.bind(null,s)).catch(s.oe)},WaterfallFlow:function(){s.e("components/waterfallFlow/index").then(function(){return resolve(s("d976"))}.bind(null,s)).catch(s.oe)},floatVideo:function(){Promise.all([s.e("common/vendor"),s.e("components/floatVideo/index")]).then(function(){return resolve(s("954c"))}.bind(null,s)).catch(s.oe)}},data:function(){return{rescueCurrent:1,rescueDataList:[],rescueArticleId:null,isarticle:!1,isLoadMore:!0,tabsTimer:null,iscommission:0,selectname:"",columnsfirst:[["客户经理","销售顾问","市场经理"]],dataList:{},commission:"",shareId:"",customerManagerId:"",showrealpop:!1,poster:"",showpopshare:!1,list:[],posterList:{},token:null,isExpert:null,tagindex:0,sourceType:"",showfourshop:!1,affiliationType:null,showfirst:!1,selecttwoname:"",fourshopid:"",selectList:[],showtwo:!1,userChannelId:"",list1:[{name:"更换轮胎"},{name:"车辆搭电"},{name:"困境救援"},{name:"平板拖车"},{name:"地库牵引"}],x:0,y:0,title:""}},created:function(){var t=this;e.getSystemInfo({success:function(s){var n=s.windowWidth,i=s.windowHeight;t.x=n-e.upx2px(25)-e.upx2px(140),t.y=i-e.upx2px(200)-e.upx2px(153)}})},mounted:function(){var e=this;this.timer=setInterval((function(){var t=e.tagindex+1;e.tagindex=t>4?0:t}),15e3)},destroyed:function(){clearInterval(this.timer),this.timer=null},onLoad:function(t){console.log("进来了===========》",JSON.stringify(t),t),t.enter&&e.setStorageSync("enter",t.enter),t.scene&&t.scene.indexOf("_enter=117")&&e.setStorageSync("enter","117"),t.iscommission&&(this.iscommission=t.iscommission);var s=this;this.isExpert=e.getStorageSync("isExpert"),this.token=e.getStorageSync("token"),t.scene&&(1==t.scene.split("_")[0]?(this.sourceType=1,this.shareId=t.scene.split("_")[1]):2==t.scene.split("_")[0]?(this.sourceType=2,this.affiliationType=2,this.customerManagerId=t.scene.split("_")[1]):5==t.scene.split("_")[0]?(this.sourceType=3,this.affiliationType=3,this.customerManagerId=t.scene.split("_")[1],this.getChannelId(this.customerManagerId,2)):7==t.scene.split("_")[0]?(this.sourceType=7,this.affiliationType=7,this.customerManagerId=t.scene.split("_")[1],this.getChannelId(this.customerManagerId,3)):4==t.scene.split("_")[0]?(this.sourceType=4,this.affiliationType=4,this.customerManagerId=t.scene.split("_")[1]):3==t.scene.split("_")[0]&&(this.showfourshop=!0,this.sourceType=5,this.fourshopid=t.scene.split("_")[1])),t.forwardUserId&&(this.shareId=t.forwardUserId),t.sourceType&&(this.sourceType=2),this.shareId||(this.shareId=e.getStorageSync("userId")),this.shareId&&e.getStorageSync("token")&&this.tempparentid(),this.rescueGetList(),this.getList(),e.$on("closepop",(function(e){s.showrealpop=!1}))},onShow:function(){},methods:{OnPushOrder:function(){e.navigateTo({url:"/pages/roadhelp/orderlist"})},setInput:function(){this.rescueCurrent=1,this.rescueGetList(!0)},rescueGetList:function(e){var t=this;return(0,a.default)(i.default.mark((function s(){var n,a,r,c,u;return i.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$request.post("/coc-active/api/v1/video/list",{current:t.rescueCurrent,size:10,type:1,title:t.title});case 2:n=s.sent,a=n.data,r=a.records,c=a.total,t.list=r,console.log(r,c),t.isarticle=0!==c,r.filter((function(e){e.coverImage?e.coverPicture=e.coverImage:e.videoUrl&&(e.coverPicture=e.videoUrl+"?x-oss-process=video/snapshot,t_1000,m_fast")})),r.length<10&&1!==t.rescueCurrent?t.isLoadMore=!1:t.isLoadMore=!0,1===t.rescueCurrent?(t.rescueDataList=r,e&&t.$refs.waterfallFlow.refresh()):c>t.rescueDataList.length?(u=t.rescueDataList).push.apply(u,(0,o.default)(r)):t.isLoadMore=!1;case 12:case"end":return s.stop()}}),s)})))()},onReachBottom:function(){this.isLoadMore&&(this.rescueCurrent++,this.rescueGetList())},OnAddshop:function(){var t=this;0==this.dataList.isSelection?this.$request.post("/coc-active/api/v1/expert/shop/selection/add",{type:3,relatedId:1}).then((function(s){200==s.code?(t.dataList.isSelection=1,e.$u.toast("加入小店成功")):e.$u.toast(s.message)})):this.$request.post("/coc-active/api/v1/expert/shop/selection/remove",{type:3,relatedId:1}).then((function(s){200==s.code?(t.dataList.isSelection=0,e.$u.toast("移出小店成功")):e.$u.toast(s.message)}))},Onnextfours:function(){if(!this.customerManagerId)return e.$u.toast("请先选择客户经理/销售类型/市场经理"),!1;this.showfourshop=!1},Onselecttwo:function(e){this.showtwo=!1,this.customerManagerId=e.value[0].id,this.selecttwoname=e.value[0].nickname,this.userChannelId=e.value[0].userChannelId},OnOpentwo:function(){if(0==this.selectList.length)return e.$u.toast("请先选择客户经理/销售/市场类型"),!1;this.showtwo=!0},Onselectfirst:function(e){var t=this;this.selectname=e.value[0],this.selecttwoname="",this.customerManagerId="",this.userChannelId="",0==e.indexs[0]?this.$newrequest.get("/coc-system/api/v1/system/customer/manager/list?shopId="+this.fourshopid).then((function(e){t.showfirst=!1,t.affiliationType=2,t.selectList=[e.data]})):1==e.indexs[0]?this.$newrequest.post("/coc-active/api/v1/sales_consultant/list",{shopId:this.fourshopid,current:1,size:99}).then((function(e){t.showfirst=!1,t.affiliationType=3,t.selectList=[e.data.records]})):2==e.indexs[0]&&(this.affiliationType=7,this.$newrequest.post("/coc-active/api/v1/sales_consultant/marketingManagerList",{shopId:this.fourshopid,current:1,size:99}).then((function(e){t.showfirst=!1,t.selectList=[e.data.records]})))},OnOpenfirst:function(){this.showfirst=!0},getList:function(){var t=this;this.$newrequest.post("/coc-active/api/v1/sky_you_product/details").then((function(s){e.setStorageSync("commission",s.data.price),t.dataList=s.data,t.commission=s.data.commission}))},tempparentid:function(){this.$request.post("/coc-active/api/v1/invite/temp_parent_id/add",{tempParentId:this.shareId}).then((function(e){}))},OnPay:function(){return e.getStorageSync("token")?1!=e.getStorageSync("isCertify")?(this.showrealpop=!0,!1):void e.navigateTo({url:"/pages/roadhelp/payindex?shareId="+this.shareId+"&customerManagerId="+this.customerManagerId+"&sourceType="+this.sourceType+"&affiliationType="+this.affiliationType}):(e.navigateTo({url:"/pages/activity/share/index?userChannelId="+this.userChannelId}),!1)},Oncopy:function(t){e.setClipboardData({data:t,success:function(){e.$u.toast("复制成功")}})},posterSuccess:function(e){this.poster=e},OnSaveImage:function(){var t=[this.poster];e.previewImage({current:99999,urls:t,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(e){},fail:function(e){console.log(e.errMsg)}}})},OnCloseShare:function(){this.showpopshare=!1},getcode:function(){var e=this,t=this;this.$request.post("/coc-active/api/v1/invite/getMiniProgramQrCode",{page:"pages/roadhelp/index",scene:"1_"+this.shareId+"_enter=117"}).then((function(s){e.showpopshare=!0,e.list=[{type:"image",path:e.posterList.shareImage,x:0,y:0,width:443,height:787},{type:"image",path:s.data.qrCode,x:18,y:682,width:90,height:90}],e.$nextTick((function(){t.$refs.poster.create()}))}))},Onpopposter:function(){var e=this;this.$request.post("/coc-active/api/v1/sky_you_product/share",{id:1}).then((function(t){e.posterList=t.data,e.getcode()}))},Onpushloadhelp:function(){if(!(0,r.tologin)())return!1;e.navigateTo({url:"/pages/roadhelp/index/index"})},OnClickTag:function(e){this.tagindex=e},getChannelId:function(e,t){var s=this;this.$request.post("/coc-system/api/v1/system/customer/manager/getChannel",{id:e,type:t}).then((function(e){200==e.code&&e.data&&e.data.userChannelId&&(s.userChannelId=e.data.userChannelId)}))}}};t.default=c}).call(this,s("543d")["default"])}},[["66e8","common/runtime","common/vendor"]]]);