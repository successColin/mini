(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/roadhelp/index"],{"063e":function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s("7dcd"),n={components:{Poster:function(){s.e("components/zhangyuhao-poster/Poster").then(function(){return resolve(s("dce9"))}.bind(null,s)).catch(s.oe)},cardauthentication:function(){s.e("components/cardauthentication").then(function(){return resolve(s("a4fb"))}.bind(null,s)).catch(s.oe)}},data:function(){return{iscommission:0,selectname:"",columnsfirst:[["客户经理","销售顾问","市场经理"]],dataList:{},commission:"",shareId:"",customerManagerId:"",showrealpop:!1,poster:"",showpopshare:!1,list:[],posterList:{},token:null,isExpert:null,tagindex:0,sourceType:"",showfourshop:!1,affiliationType:null,showfirst:!1,selecttwoname:"",fourshopid:"",selectList:[],showtwo:!1,list1:[{name:"更换轮胎"},{name:"车辆搭电"},{name:"困境救援"},{name:"平板拖车"},{name:"地库牵引"}]}},onLoad:function(t){t.iscommission&&(this.iscommission=t.iscommission);var s=this;this.isExpert=e.getStorageSync("isExpert"),this.token=e.getStorageSync("token"),t.scene&&(1==t.scene.split("_")[0]?(this.sourceType=1,this.shareId=t.scene.split("_")[1]):2==t.scene.split("_")[0]?(this.sourceType=2,this.affiliationType=2,this.customerManagerId=t.scene.split("_")[1]):5==t.scene.split("_")[0]?(this.sourceType=3,this.affiliationType=3,this.customerManagerId=t.scene.split("_")[1]):7==t.scene.split("_")[0]?(this.sourceType=7,this.affiliationType=7,this.customerManagerId=t.scene.split("_")[1]):4==t.scene.split("_")[0]?(this.sourceType=4,this.affiliationType=4,this.customerManagerId=t.scene.split("_")[1]):3==t.scene.split("_")[0]&&(this.showfourshop=!0,this.sourceType=5,this.fourshopid=t.scene.split("_")[1])),t.forwardUserId&&(this.shareId=t.forwardUserId),t.sourceType&&(this.sourceType=2),this.shareId||(this.shareId=e.getStorageSync("userId")),this.shareId&&e.getStorageSync("token")&&this.tempparentid(),this.getList(),e.$on("closepop",(function(e){s.showrealpop=!1}))},onShow:function(){},methods:{OnAddshop:function(){var t=this;0==this.dataList.isSelection?this.$request.post("/coc-active/api/v1/expert/shop/selection/add",{type:3,relatedId:1}).then((function(s){200==s.code?(t.dataList.isSelection=1,e.$u.toast("加入小店成功")):e.$u.toast(s.message)})):this.$request.post("/coc-active/api/v1/expert/shop/selection/remove",{type:3,relatedId:1}).then((function(s){200==s.code?(t.dataList.isSelection=0,e.$u.toast("移出小店成功")):e.$u.toast(s.message)}))},Onnextfours:function(){if(!this.customerManagerId)return e.$u.toast("请先选择客户经理/销售类型/市场经理"),!1;this.showfourshop=!1},Onselecttwo:function(e){this.showtwo=!1,this.customerManagerId=e.value[0].id,this.selecttwoname=e.value[0].nickname},OnOpentwo:function(){if(0==this.selectList.length)return e.$u.toast("请先选择客户经理/销售/市场类型"),!1;this.showtwo=!0},Onselectfirst:function(e){var t=this;this.selectname=e.value[0],this.selecttwoname="",this.customerManagerId="",0==e.indexs[0]?this.$newrequest.get("/coc-system/api/v1/system/customer/manager/list?shopId="+this.fourshopid).then((function(e){t.showfirst=!1,t.affiliationType=2,t.selectList=[e.data]})):1==e.indexs[0]?this.$newrequest.post("/coc-active/api/v1/sales_consultant/list",{shopId:this.fourshopid,current:1,size:99}).then((function(e){t.showfirst=!1,t.affiliationType=3,t.selectList=[e.data.records]})):2==e.indexs[0]&&(this.affiliationType=7,this.$newrequest.post("/coc-active/api/v1/sales_consultant/marketingManagerList",{shopId:this.fourshopid,current:1,size:99}).then((function(e){t.showfirst=!1,t.selectList=[e.data.records]})))},OnOpenfirst:function(){this.showfirst=!0},getList:function(){var t=this;this.$newrequest.post("/coc-active/api/v1/sky_you_product/details").then((function(s){e.setStorageSync("commission",s.data.price),t.dataList=s.data,t.commission=s.data.commission}))},tempparentid:function(){this.$request.post("/coc-active/api/v1/invite/temp_parent_id/add",{tempParentId:this.shareId}).then((function(e){}))},OnPay:function(){return e.getStorageSync("token")?1!=e.getStorageSync("isCertify")?(this.showrealpop=!0,!1):void e.navigateTo({url:"/pages/roadhelp/payindex?shareId="+this.shareId+"&customerManagerId="+this.customerManagerId+"&sourceType="+this.sourceType+"&affiliationType="+this.affiliationType}):((0,i.tologin)(),!1)},Oncopy:function(t){e.setClipboardData({data:t,success:function(){e.$u.toast("复制成功")}})},posterSuccess:function(e){this.poster=e},OnSaveImage:function(){var t=[this.poster];e.previewImage({current:99999,urls:t,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(e){},fail:function(e){console.log(e.errMsg)}}})},OnCloseShare:function(){this.showpopshare=!1},getcode:function(){var e=this,t=this;this.$request.post("/coc-active/api/v1/invite/getMiniProgramQrCode",{page:"pages/roadhelp/index",scene:"1_"+this.shareId}).then((function(s){e.showpopshare=!0,e.list=[{type:"image",path:e.posterList.shareImage,x:0,y:0,width:443,height:787},{type:"image",path:s.data.qrCode,x:18,y:682,width:90,height:90}],e.$nextTick((function(){t.$refs.poster.create()}))}))},Onpopposter:function(){var e=this;this.$request.post("/coc-active/api/v1/sky_you_product/share",{id:1}).then((function(t){e.posterList=t.data,e.getcode()}))},Onpushloadhelp:function(){e.navigateTo({url:"/pages/roadhelp/index/index"})},OnClickTag:function(e){this.tagindex=e}}};t.default=n}).call(this,s("543d")["default"])},"0fc2":function(e,t,s){},"35c4":function(e,t,s){"use strict";s.r(t);var i=s("d44b"),n=s("a33c");for(var o in n)["default"].indexOf(o)<0&&function(e){s.d(t,e,(function(){return n[e]}))}(o);s("655b");var a=s("f0c5"),c=Object(a["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=c.exports},"655b":function(e,t,s){"use strict";var i=s("0fc2"),n=s.n(i);n.a},a33c:function(e,t,s){"use strict";s.r(t);var i=s("063e"),n=s.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){s.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},d44b:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return i}));var i={uDivider:function(){return Promise.all([s.e("common/vendor"),s.e("uni_modules/uview-ui/components/u-divider/u-divider")]).then(s.bind(null,"4e62"))},uPopup:function(){return Promise.all([s.e("common/vendor"),s.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(s.bind(null,"076f"))},uPicker:function(){return Promise.all([s.e("common/vendor"),s.e("uni_modules/uview-ui/components/u-picker/u-picker")]).then(s.bind(null,"3f29"))}},n=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showfourshop=!1},e.e1=function(t){e.showfirst=!1},e.e2=function(t){e.showtwo=!1})},o=[]},f7e4:function(e,t,s){"use strict";(function(e,t){var i=s("4ea4");s("4319");i(s("66fd"));var n=i(s("35c4"));e.__webpack_require_UNI_MP_PLUGIN__=s,t(n.default)}).call(this,s("bc2e")["default"],s("543d")["createPage"])}},[["f7e4","common/runtime","common/vendor"]]]);