require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/roadhelp/index/payindex"],{"302a":function(e,t,n){},"40df":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={components:{},data:function(){return{ischeck:!1,radiovalue1:!1,showkeyboard:!1,dataList:{},rescue_plate:"请输入车牌号",roadVip:"",money_rule:"",showrule:!1,tips:"",isheight:!1,order_no:"",showmodal:!1}},onLoad:function(t){this.roadVip=t.roadVip;var n=this;e.getSystemInfo({success:function(e){e.statusBarHeight>20&&(n.isheight=!0)}});var o=this.getOpenerEventChannel();o.on("getList",(function(t){n.dataList=t.data,n.dataList.customer_phone=e.getStorageSync("mobile"),t.data.user_car.length>0&&(n.dataList.rescue_plate=t.data.user_car[0],n.rescue_plate=t.data.user_car[0],n.getprice2())}))},onShow:function(){},methods:{OnPushweb:function(){e.navigateTo({url:"/pages/agreement/webview?url=https://h5.dcqcjlb.com/protocol/road_rescue_service_agreement.html"})},wxpay:function(t){e.requestPayment({provider:"wxpay",timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign,appid:t.appId,success:function(t){console.log("qian"),e.showToast({icon:"success",title:"支付成功",complete:function(){setTimeout((function(){e.navigateTo({url:"/pages/roadhelp/index/successpay"})}),1e3)}})},fail:function(t){e.$u.toast("支付失败")}})},advancePayment:function(){var t=this;this.$request.post("/coc-active/api/v1/road/rescue/advancePayment",{openid:e.getStorageSync("openid"),order_no:this.order_no}).then((function(n){200==n.code?(t.showmodal=!1,t.wxpay(n.data)):e.$u.toast(n.message)}))},changeradio:function(e){this.ischeck=!0},nextpay:function(){var t=this;this.dataList.rescue_plate=this.rescue_plate,this.$request.post("/coc-active/api/v1/road/rescue/placeOrder",this.dataList).then((function(n){200==n.code?0==n.data.is_pay?(t.order_no=n.data.order_no,t.showmodal=!0):e.navigateTo({url:"/pages/roadhelp/index/successpay"}):e.$u.toast(n.message)}))},Onorder:function(){if(!this.ischeck)return e.$u.toast("请确认阅读道路救援服务协议"),!1;if("请输入车牌号"==this.rescue_plate||!this.rescue_plate)return e.$u.toast("请输入救援车辆车牌号"),!1;var t=this;e.requestSubscribeMessage({tmplIds:["ah92VNgOpkMBlr2USaGPPUURyts2lF65yUvdIJSVkes","j2e7-MfrZvFZyfxtqenCQK1nEOdTHwMFXvBBrS_F5o0","jXOYl_PFUFvYK9eZlgrMeDRoUPpnf6ds8p6rm-fgpoQ"],complete:function(e){t.nextpay()}})},getCode:function(){var t=this;this.$refs.uCode.canGetCode?(e.showLoading({title:"正在获取验证码"}),this.$newrequest.post("/coc-system/api/v1/system/sms/send/code",{mobile:this.dataList.customer_phone,type:1}).then((function(n){200==n.code?setTimeout((function(){e.hideLoading(),e.$u.toast("验证码已发送"),t.$refs.uCode.start()}),2e3):e.$u.toast(n.message)}))):e.$u.toast("倒计时结束后再发送")},codeChange:function(e){this.tips=e},watchrule:function(e){this.money_rule=e.money_rule,this.showrule=!0},getprice2:function(){var t=this;this.$request.post("/coc-active/api/v1/road/rescue/calculatePrice",this.dataList).then((function(n){200==n.code?(t.dataList.rescue_project=n.data.rescue_project,t.dataList.total_money=n.data.total_money):e.$u.toast(n.message)}))},getprice:function(){var t=this;this.showkeyboard=!1,this.dataList.rescue_plate=this.rescue_plate,this.$request.post("/coc-active/api/v1/road/rescue/calculatePrice",this.dataList).then((function(n){200==n.code?(t.dataList.rescue_project=n.data.rescue_project,t.dataList.total_money=n.data.total_money):e.$u.toast(n.message)}))},changekey:function(e){if("请输入车牌号"==this.rescue_plate&&(this.rescue_plate=""),8==this.rescue_plate.length)return!1;this.rescue_plate=this.rescue_plate+e},Onbackspace:function(){this.rescue_plate=this.rescue_plate.substr(0,this.rescue_plate.length-1)}}};t.default=n}).call(this,n("543d")["default"])},"508c":function(e,t,n){"use strict";var o=n("302a"),u=n.n(o);u.a},"9d3b":function(e,t,n){"use strict";n.r(t);var o=n("40df"),u=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=u.a},d153:function(e,t,n){"use strict";(function(e,t){var o=n("4ea4");n("76b1");o(n("66fd"));var u=o(n("fbb7"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(u.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},e4ab:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var o={uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"0f14"))},"u-Input":function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u--input/u--input")]).then(n.bind(null,"c00c"))},uToast:function(){return n.e("uni_modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,"1b13"))},uCode:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-code/u-code")]).then(n.bind(null,"9c9e"))},uButton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,"bfa6"))},uRadioGroup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-radio-group/u-radio-group")]).then(n.bind(null,"8f9f"))},uRadio:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-radio/u-radio")]).then(n.bind(null,"37f9"))},uKeyboard:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-keyboard/u-keyboard")]).then(n.bind(null,"c984"))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,"8add"))},uModal:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-modal/u-modal")]).then(n.bind(null,"ba5d"))}},u=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showkeyboard=!0},e.e1=function(t){e.showrule=!1},e.e2=function(t){e.showrule=!1},e.e3=function(t){e.showmodal=!1})},a=[]},fbb7:function(e,t,n){"use strict";n.r(t);var o=n("e4ab"),u=n("9d3b");for(var a in u)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return u[e]}))}(a);n("508c");var i=n("f0c5"),s=Object(i["a"])(u["default"],o["b"],o["c"],!1,null,"4a0e86fe",null,!1,o["a"],void 0);t["default"]=s.exports}},[["d153","common/runtime","common/vendor"]]]);