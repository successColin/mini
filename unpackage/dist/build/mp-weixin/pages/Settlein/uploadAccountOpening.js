(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Settlein/uploadAccountOpening"],{24091:function(e,t,n){"use strict";n.r(t);var i=n("7eef"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},6947:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={uCheckboxGroup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-checkbox-group/u-checkbox-group")]).then(n.bind(null,"b691"))},uCheckbox:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-checkbox/u-checkbox")]).then(n.bind(null,"234e"))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,"076f"))},uCountDown:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-count-down/u-count-down")]).then(n.bind(null,"e517"))},uLoadingPage:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-loading-page/u-loading-page")]).then(n.bind(null,"fbb6"))},uToast:function(){return n.e("uni_modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,"4bf8"))}},o=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showagreement=!1})},a=[]},"7eef":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("e2cc"),o={components:{},data:function(){return{showloading:!1,checkboxValue1:[],agree:!1,dataList:{bankAcctImg:""},showagreement:!1,timeData:{},isfinish:!1,isshow:!0}},onLoad:function(t){var n=this,i=this.getOpenerEventChannel();i.on("getinfo",(function(t){e.$u.sleep(0).then((function(){n.dataList=t.data,n.dataList.bankAcctImg=t.data.licenceOpening}))})),1==t.isshow&&(this.isshow=!1,e.setNavigationBarTitle({title:"企业开户证明查看"}),this.getList())},onShow:function(){},methods:{getList:function(){var e=this;this.$request.post("/coc-active/api/v1/merchantsettledin/dataEcho",{echoType:"3"}).then((function(t){e.dataList={bankAcctImg:t.data.featuredMaterials.licenceOpening}}))},Onqianshu:function(){if(!this.isfinish)return!1;this.showagreement=!1,this.agree=!0},Onfinish:function(){this.isfinish=!0},onChange:function(e){this.timeData=e},OnPushCooperation:function(){this.isfinish||this.$refs.countDown.start(),this.showagreement=!0},OnChangecheckboxValue1:function(t){1==t.length&&e.$u.toast("请点击《商家合作协议》签署协议")},corporatePayment:function(t){var n=this,i=this;1==this.dataList.isLineLedger?this.$request.post("/coc-active/api/v1/merchantsettledin/corporatePayment",{umsRegId:t,companyAccount:this.dataList.bankAcctNo}).then((function(t){n.$refs.uToast.show({type:"success",message:"上传成功，请等待审核成功后认证",complete:function(){this.showloading=!1,e.navigateTo({url:"/pages/Settlein/enterpriseProgress?type=1&isLineLedger="+i.dataList.isLineLedger})}})})):this.$refs.uToast.show({type:"success",message:"上传成功，请等待审核成功后认证",complete:function(){this.showloading=!1,e.navigateTo({url:"/pages/Settlein/enterpriseProgress?type=1&isLineLedger="+i.dataList.isLineLedger})}})},OnAdd:function(){var t=this,n=this;return 1==this.dataList.isLineLedger&&0==this.checkboxValue1.length?(e.$u.toast("请确认阅读并同意商务隐私政策"),!1):1!=this.dataList.isLineLedger||this.agree?(this.showloading=!0,this.dataList.picList.filter((function(e){"0006"==e.document_type?e.document_name="开户许可证（企业商户必传)":"0007"==e.document_type&&(e.document_name="手持身份证自拍照")})),void this.$request.post("/coc-active/api/v1/merchantsettledin/dataUpload",this.dataList).then((function(e){200==e.code?t.corporatePayment(e.data):t.$refs.uToast.show({message:e.message})}))):(this.$refs.uToast.show({type:"default",message:"请签署商务隐私政策",complete:function(){n.showagreement=!0,n.$refs.countDown.start()}}),!1)},uploadPictures:function(e,t){var n=this,i=!1;this.showloading=!0,this.$newrequest.post("/coc-active/api/v1/merchantsettledin/uploadPictures",{img:e}).then((function(e){n.dataList.picList.filter((function(o,a){o.document_type==t&&(i=!0,n.dataList.picList[a]={document_type:t,file_path:e.data.filePath,file_size:e.data.fileSize})})),i||n.dataList.picList.push({document_type:t,file_path:e.data.filePath,file_size:e.data.fileSize,document_name:" 开户许可证（企业商户必传）"}),n.showloading=!1}))},getbase64:function(e,t){var n=this;(0,i.pathToBase64)(e).then((function(e){n.uploadPictures(e,t)})).catch((function(e){console.error(e)}))},OnChooseholdimg:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],success:function(e){t.dataList.holdimg=e.tempFilePaths[0],t.uploadimg(e.tempFilePaths[0],"selfieImg"),t.getbase64(e.tempFilePaths[0],"0007")}})},uploadimg:function(t,n){var i=this;e.uploadFile({url:getApp().globalData.uploadUrl,filePath:t,name:"file",formData:{file:t},header:{"Content-Type":"multipart/form-data"},success:function(e){"licenceOpening"==n?i.dataList.licenceOpening=JSON.parse(e.data).data:"selfieImg"==n&&(i.dataList.selfieImg=JSON.parse(e.data).data)}})},OnChooseBankAcc:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],success:function(e){t.dataList.bankAcctImg=e.tempFilePaths[0],t.uploadimg(e.tempFilePaths[0],"licenceOpening"),t.getbase64(e.tempFilePaths[0],"0006")}})}}};t.default=o}).call(this,n("543d")["default"])},"86e4":function(e,t,n){},"95e2":function(e,t,n){"use strict";n.r(t);var i=n("6947"),o=n("24091");for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("eba9");var s=n("f0c5"),u=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=u.exports},d77b:function(e,t,n){"use strict";(function(e,t){var i=n("4ea4");n("4319");i(n("66fd"));var o=i(n("95e2"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},eba9:function(e,t,n){"use strict";var i=n("86e4"),o=n.n(i);o.a}},[["d77b","common/runtime","common/vendor"]]]);