(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Settlein/uploadIndividual"],{"061a":function(t,a,e){"use strict";e.r(a);var i=e("1066"),o=e("c99f");for(var s in o)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return o[t]}))}(s);e("1169");var n=e("f0c5"),d=Object(n["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);a["default"]=d.exports},1066:function(t,a,e){"use strict";e.d(a,"b",(function(){return o})),e.d(a,"c",(function(){return s})),e.d(a,"a",(function(){return i}));var i={uFormItem:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uview-ui/components/u-form-item/u-form-item")]).then(e.bind(null,"4019"))},"u-Input":function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uview-ui/components/u--input/u--input")]).then(e.bind(null,"e709"))},uToast:function(){return e.e("uni_modules/uview-ui/components/u-toast/u-toast").then(e.bind(null,"4bf8"))},uLoadingPage:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uview-ui/components/u-loading-page/u-loading-page")]).then(e.bind(null,"fbb6"))},uPopup:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(e.bind(null,"076f"))},uIcon:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(e.bind(null,"f23e"))}},o=function(){var t=this,a=t.$createElement,e=(t._self._c,t.qualificationsList.length);t._isMounted||(t.e0=function(a){t.mccshow=!1},t.e1=function(a,e){var i=arguments[arguments.length-1].currentTarget.dataset,o=i.eventParams||i["event-params"];e=o.index;t.currentmcc=e}),t.$mp.data=Object.assign({},{$root:{g0:e}})},s=[]},1169:function(t,a,e){"use strict";var i=e("eaa0"),o=e.n(i);o.a},"72c2":function(t,a,e){"use strict";(function(t,a){var i=e("4ea4");e("4319");i(e("66fd"));var o=i(e("061a"));t.__webpack_require_UNI_MP_PLUGIN__=e,a(o.default)}).call(this,e("bc2e")["default"],e("543d")["createPage"])},"92e2":function(t,a,e){"use strict";(function(t){var i=e("4ea4");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=i(e("9523")),s=e("e2cc"),n={components:{},data:function(){var t;return t={currentmcc:0,showloading:!1,base64:"",type:"",isshow:!0,mccshow:!1,industrylist:[]},(0,o.default)(t,"currentmcc",0),(0,o.default)(t,"qualificationsList",[]),(0,o.default)(t,"qualificationsImg",[]),(0,o.default)(t,"dataList",{qualificationsImg:[],mccCode:"",mccMsg:"",bankImgFront:"",bankImgBack:"",selfieImg:"",licenceOpening:"",indoorPhotograph:"",doorheadPhoto:"",appScreenshot:"",bnfHomeAddr:"",bnfCertExpire:"",bnfCertno:"",bnfName:"",companyAddrExt:"",companyCertExpire:"9999-12-31",shareholderHomeAddr:"",shareholderCertExpire:"",shareholderCertno:"",shareholderName:"",companyName:"",companyCertNo:"",legalmanHomeAddr:"",legalIdcardNo:"",legalName:"",juridicalIdCardFrontImg:"",juridicalIdCardBackImg:"",licenseImg:"",picList:[],legalCardDeadline:"",screenshotImg:"",regMerType:"00",bankAcctType:"1",shareHolderType:"1",bnfType:"1",bnfList:[{bnfName:"",bnfCertno:"",bnfCertExpire:"",bnfCertType:"1",bnfHomeAddr:""}]}),t},onLoad:function(a){this.dataList.shopTypeId=a.shopTypeId,this.type=a.type,1==a.isshow?(this.isshow=!1,t.setNavigationBarTitle({title:"个体工商户入驻资料查看"}),this.getList()):2==a.isshow&&this.getallList(),a.sourceType&&(this.dataList.sourceType=a.sourceType),a.operateId&&(this.dataList.operateId=a.operateId),a.operateId&&(this.dataList.operateId=a.operateId),a.affiliationType&&(this.dataList.affiliationType=a.affiliationType),a.isLineLedger&&(this.dataList.isLineLedger=a.isLineLedger),console.log(this.dataList)},onShow:function(){},methods:{Onspecialimg:function(a){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){e.uploadimg(t.tempFilePaths[0],a)}})},Onchoosemcc:function(t){this.mccshow=!1,this.dataList.mccCode=t.mccCode,this.dataList.mccMsg=t.mccMsg,this.qualificationsList=t.qualificationsList,this.qualificationsImg=[]},OnMccCode:function(){var t=this;if(!this.isshow)return!1;this.$request.post("/coc-merchant-app/app/v1/merchantsettledin/selectIndustry").then((function(a){t.industrylist=a.data,t.mccshow=!0}))},getallList:function(){var t=this;this.$request.post("/coc-active/api/v1/merchantsettledin/dataEcho",{echoType:"4"}).then((function(a){t.dataList=a.data.merchansettledinDTO,t.dataList.screenshotImg=a.data.merchansettledinDTO.appScreenshot,t.dataList.DoorheadImg=a.data.merchansettledinDTO.doorheadPhoto,t.dataList.IndoorImg=a.data.merchansettledinDTO.indoorPhotograph,t.dataList.indoorPhotograph2=a.data.merchansettledinDTO.indoorPhotograph2,t.dataList.bnfList=[]}))},getList:function(){var t=this;this.$request.post("/coc-active/api/v1/merchantsettledin/dataEcho",{echoType:"1"}).then((function(a){t.dataList.licenseImg=a.data.settlementMaterials.licenseImg,t.dataList.juridicalIdCardFrontImg=a.data.settlementMaterials.juridicalIdCardFrontImg,t.dataList.juridicalIdCardBackImg=a.data.settlementMaterials.juridicalIdCardBackImg,t.dataList.screenshotImg=a.data.settlementMaterials.appScreenshot,t.dataList.DoorheadImg=a.data.settlementMaterials.indoorPhotograph,t.dataList.IndoorImg=a.data.settlementMaterials.doorheadPhoto,t.dataList.indoorPhotograph2=a.data.settlementMaterials.indoorPhotograph2,t.dataList.mccMsg=a.data.settlementMaterials.industryMsg,t.qualificationsImg=a.data.settlementMaterials.qualificationsImg.split(","),t.qualificationsList=a.data.settlementMaterials.qualificationsImg.split(",")}))},Submit:function(){var a=this;if(this.dataList.juridicalIdCardFrontImg&&this.dataList.juridicalIdCardBackImg&&this.dataList.licenseImg&&this.dataList.DoorheadImg&&this.dataList.IndoorImg&&this.dataList.indoorPhotograph2&&this.dataList.mccCode){if(1==this.dataList.isLineLedger&&!this.dataList.screenshotImg)return this.$refs.uToast.show({type:"default",message:"请上传'我的'页面截图"}),!1;var e=0;if(this.qualificationsImg.filter((function(t){t&&e++})),e!=this.qualificationsList.length)return this.$refs.uToast.show({type:"default",message:"请上传特殊资质图片"}),!1;this.qualificationsImg&&(this.dataList.qualificationsImg=this.qualificationsImg.join(",")),this.dataList.picList.filter((function(t){"0001"==t.document_type?t.document_name="法人身份证":"0011"==t.document_type?t.document_name="身份证反面":"0002"==t.document_type?t.document_name="商户营业执照":"0034"==t.document_type?t.document_name="商户网站/APP截图":"0005"==t.document_type?t.document_name="门头照片":"0015"==t.document_type&&(t.document_name="室内照片")})),this.dataList.regMerType="01",this.dataList.bankAcctType="0",this.dataList.shareHolderType="1",this.dataList.bnfType="1",t.navigateTo({url:"/pages/Settlein/individualInfo",success:function(t){t.eventChannel.emit("getinfo",{data:a.dataList})}})}else this.$refs.uToast.show({type:"default",message:"请上传个体工商户入驻资料"})},uploadPictures:function(t,a){var e=this,i=!1;this.$newrequest.post("/coc-active/api/v1/merchantsettledin/uploadPictures",{img:t}).then((function(t){e.dataList.picList.filter((function(o,s){o.document_type==a&&(i=!0,e.dataList.picList[s]={document_type:a,file_path:t.data.filePath,file_size:t.data.fileSize})})),i||e.dataList.picList.push({document_type:a,file_path:t.data.filePath,file_size:t.data.fileSize}),e.showloading=!1}))},getbase64:function(t,a){var e=this;(0,s.pathToBase64)(t).then((function(t){e.uploadPictures(t,a)})).catch((function(t){console.error(t)}))},OnIndoor:function(a){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){1==a?(e.dataList.IndoorImg=t.tempFilePaths[0],e.uploadimg(t.tempFilePaths[0],"indoorPhotograph"),e.getbase64(t.tempFilePaths[0],"0015")):(e.dataList.indoorPhotograph2=t.tempFilePaths[0],e.uploadimg(t.tempFilePaths[0],"indoorPhotograph2"))}})},OnDoorhead:function(){var a=this;t.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){a.dataList.DoorheadImg=t.tempFilePaths[0],a.uploadimg(t.tempFilePaths[0],"doorheadPhoto"),a.getbase64(t.tempFilePaths[0],"0005")}})},Onscreenshot:function(){var a=this;t.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){a.dataList.screenshotImg=t.tempFilePaths[0],a.uploadimg(t.tempFilePaths[0],"appScreenshot"),a.getbase64(t.tempFilePaths[0],"0034")}})},uploadimg:function(a,e){var i=this;this.showloading=!0,t.uploadFile({url:getApp().globalData.uploadUrl,filePath:a,name:"file",formData:{file:a},header:{"Content-Type":"multipart/form-data"},success:function(t){"appScreenshot"==e?i.dataList.appScreenshot=JSON.parse(t.data).data:"doorheadPhoto"==e?i.dataList.doorheadPhoto=JSON.parse(t.data).data:"indoorPhotograph"==e?i.dataList.indoorPhotograph=JSON.parse(t.data).data:"indoorPhotograph2"==e?(i.dataList.indoorPhotograph2=JSON.parse(t.data).data,i.showloading=!1):(i.qualificationsImg[e]=JSON.parse(t.data).data,i.showloading=!1)}})},CardlicenseImg:function(a){20==a.detail.reg_num.text.length?this.dataList.shopLic=a.detail.reg_num.text.substring(0,18):17==a.detail.reg_num.text.length?this.dataList.shopLic=a.detail.reg_num.text.substring(0,15):this.dataList.shopLic=a.detail.reg_num.text,this.dataList.shopName=a.detail.enterprise_name.text,this.dataList.shopAddrExt=a.detail.address.text;var e=this;this.showloading=!0,t.uploadFile({url:getApp().globalData.uploadUrl,filePath:a.detail.image_path,name:"file",formData:{file:a.detail.image_path},header:{"Content-Type":"multipart/form-data"},success:function(t){e.dataList.licenseImg=JSON.parse(t.data).data,e.getbase64(a.detail.image_path,"0002")}})},CardBackImg:function(a){var e=a.detail.valid_date.text.substr(a.detail.valid_date.text.lastIndexOf("-")+1,8);e=e.slice(0,4)+"-"+e.slice(4),e=e.slice(0,7)+"-"+e.slice(7),this.dataList.legalCardDeadline=e;var i=this;this.showloading=!0,t.uploadFile({url:getApp().globalData.uploadUrl,filePath:a.detail.image_path,name:"file",formData:{file:a.detail.image_path},header:{"Content-Type":"multipart/form-data"},success:function(t){i.dataList.juridicalIdCardBackImg=JSON.parse(t.data).data,i.getbase64(a.detail.image_path,"0011")}})},CardFrontImg:function(a){this.dataList.legalName=a.detail.name.text,this.dataList.legalIdcardNo=a.detail.id.text,this.dataList.legalmanHomeAddr=a.detail.address.text;var e=this;this.showloading=!0,t.uploadFile({url:getApp().globalData.uploadUrl,filePath:a.detail.image_path,name:"file",formData:{file:a.detail.image_path},header:{"Content-Type":"multipart/form-data"},success:function(t){e.dataList.juridicalIdCardFrontImg=JSON.parse(t.data).data,e.getbase64(a.detail.image_path,"0001")}})}}};a.default=n}).call(this,e("543d")["default"])},c99f:function(t,a,e){"use strict";e.r(a);var i=e("92e2"),o=e.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(s);a["default"]=o.a},eaa0:function(t,a,e){}},[["72c2","common/runtime","common/vendor"]]]);