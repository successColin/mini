require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Settlein/uploadIndividual"],{"0fb6":function(t,e,a){"use strict";var i=a("7f7e"),n=a.n(i);n.a},"4baf":function(t,e,a){"use strict";var i=a("a5dd"),n=a.n(i);n.a},"5bd1":function(t,e,a){"use strict";a.r(e);var i=a("6413"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"5fed":function(t,e,a){"use strict";a.r(e);var i=a("e993"),n=a("5bd1");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("4baf"),a("0fb6");var s=a("f0c5"),d=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"29b9ce11",null,!1,i["a"],void 0);e["default"]=d.exports},6413:function(t,e,a){"use strict";(function(t){var i=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("2eee")),o=i(a("c973")),s=i(a("9523")),d=a("b1ac");function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}var c={components:{ACompress:function(){Promise.all([a.e("common/vendor"),a.e("pages/Settlein/common/vendor"),a.e("pages/Settlein/components/ACompress")]).then(function(){return resolve(a("57f8"))}.bind(null,a)).catch(a.oe)}},data:function(){return{option:{},identityDisabled:!1,identityArr:[{name:"我是经营者本人",value:1},{name:"我不是经营者本人",value:2}],currentmcc:0,showloading:!1,type:"",base64:"",isshow:!0,mccshow:!1,industrylist:[],qualificationsList:[],qualificationsImg:[],identity:1,dataList:{settleType:"",qualificationsImg:[],mccCode:"",mccMsg:"",bankImgFront:"",bankImgBack:"",selfieImg:"",licenceOpening:"",indoorPhotograph:"",doorheadPhoto:"",appScreenshot:"",bnfHomeAddr:"",bnfCertExpire:"",bnfCertno:"",bnfName:"",companyAddrExt:"",companyCertExpire:"9999-12-31",shareholderHomeAddr:"",shareholderCertExpire:"",shareholderCertno:"",shareholderName:"",companyName:"",companyCertNo:"",legalmanHomeAddr:"",legalIdcardNo:"",legalName:"",juridicalIdCardFrontImg:"",juridicalIdCardBackImg:"",licenseImg:"",picList:[],legalCardDeadline:"",screenshotImg:"",fundManagementConfirmationLetterImg:"",cashierImg:"",feeConfirmationLetterImg:"",agentIdCardFrontImg:"",agentIdCardBackImg:"",agentPowerOfAttorneyImg:"",regMerType:"00",bankAcctType:"1",shareHolderType:"1",bnfType:"1",bnfList:[{bnfName:"",bnfCertno:"",bnfCertExpire:"",bnfCertType:"1",bnfHomeAddr:""}]}}},onLoad:function(e){this.option=e,this.type=e.type,1==e.isshow?(this.isshow=!1,t.setNavigationBarTitle({title:"入驻资料查看"}),this.getList("1")):2==e.isshow?this.getList("4"):this.getList("4","/coc-merchant-app/app/v1/merchantsettledin/viewSave"),e.sourceType&&(this.dataList.sourceType=e.sourceType),e.operateId&&(this.dataList.operateId=e.operateId),e.operateId&&(this.dataList.operateId=e.operateId),e.affiliationType&&(this.dataList.affiliationType=e.affiliationType),e.isLineLedger&&(this.dataList.isLineLedger=e.isLineLedger),e.settleType&&(this.dataList.settleType=e.settleType)},onShow:function(){},methods:{groupChange:function(t){this.identity=t,1==t&&(this.dataList.agentIdCardFrontImg="",this.dataList.agentIdCardBackImg="",this.dataList.agentPowerOfAttorneyImg="")},Onchoosemcc:function(t){this.mccshow=!1,this.dataList.mccCode=t.mccCode,this.dataList.mccMsg=t.mccMsg,this.qualificationsList=t.qualificationsList,this.qualificationsImg=[]},OnMccCode:function(){var t=this;this.$request.post("/coc-merchant-app/app/v1/merchantsettledin/selectIndustry").then((function(e){t.industrylist=e.data,t.mccshow=!0}))},getList:function(e,a){var i=this,n=a||"/coc-active/api/v1/merchantsettledin/dataEcho",o={};o=a?{mobile:t.getStorageSync("mobile")}:{echoType:e},this.$request.post(n,o).then((function(t){var n="";"1"===e?n=t.data.settlementMaterials:"4"===e&&(n=a?t.data:t.data.merchansettledinDTO,i.dataList.bnfList=[]);var o=n,s=o.licenseImg,d=o.juridicalIdCardFrontImg,r=o.juridicalIdCardBackImg,c=o.appScreenshot,u=o.licenceOpening,l=o.doorheadPhoto,m=o.indoorPhotograph,g=o.fundManagementConfirmationLetterImg,h=o.feeConfirmationLetterImg,p=o.cashierImg,f=o.agentIdCardFrontImg,L=o.agentIdCardBackImg,I=o.agentPowerOfAttorneyImg,b=o.industryMsg,v=o.qualificationsImg,y=o.indoorPhotograph2,_=o.settleType,w=o.isLineLedger,P=o.mccMsg;i.dataList=n,i.dataList.licenseImg=s,i.dataList.juridicalIdCardFrontImg=d,i.dataList.juridicalIdCardBackImg=r,i.dataList.screenshotImg=c,i.dataList.licenceOpening=u,i.dataList.DoorheadImg=l,i.dataList.cashierImg=p,i.dataList.indoorPhotograph=m,i.dataList.fundManagementConfirmationLetterImg=g,i.dataList.feeConfirmationLetterImg=h,i.dataList.agentIdCardFrontImg=f,i.dataList.agentIdCardBackImg=L,i.dataList.agentPowerOfAttorneyImg=I,i.dataList.mccMsg=b,i.indoorPhotograph2=y,i.dataList.isLineLedger=w,i.dataList.settleType=_,i.option.settleType&&(i.dataList.settleType=i.option.settleType),i.option.isLineLedger&&(i.dataList.isLineLedger=i.option.isLineLedger),"1"===e?(i.dataList.IndoorImg=l,i.dataList.licenceOpening=t.data.featuredMaterials.licenceOpening,i.dataList.bankImgBack=t.data.featuredMaterials.bankImgBack,i.dataList.bankImgFront=t.data.featuredMaterials.bankImgFront,i.dataList.selfieImg=t.data.featuredMaterials.selfieImg):"4"===e&&(i.dataList.IndoorImg=m,i.dataList.mccMsg=P,i.dataList.bnfList=[]),console.log(f,L,I),i.identity=f&&L&&I?2:1,i.qualificationsImg=v.split(","),i.qualificationsList=v.split(","),i.isshow||(i.identityDisabled=!0)}))},Submit:function(){var e=this,a=!0;2===this.identity&&(a=!1,this.dataList.agentIdCardFrontImg&&this.dataList.agentIdCardBackImg&&this.dataList.agentPowerOfAttorneyImg&&(a=!0));var i=!0;2==this.dataList.settleType&&(i=!1,this.dataList.fundManagementConfirmationLetterImg&&this.dataList.feeConfirmationLetterImg&&this.dataList.cashierImg&&this.dataList.indoorPhotograph&&(i=!0));var n=!0;if(1==this.dataList.settleType&&(n=!1,this.dataList.indoorPhotograph2&&this.dataList.indoorPhotograph&&this.dataList.selfieImg&&(n=!0)),console.log(this.dataList,a,i,n),this.dataList.juridicalIdCardFrontImg&&this.dataList.juridicalIdCardBackImg&&this.dataList.licenseImg&&this.dataList.DoorheadImg&&this.dataList.bankImgFront&&this.dataList.bankImgBack&&this.dataList.mccCode&&this.dataList.doorheadPhoto&&a&&i&&n){var o,d=0;if(this.qualificationsImg.filter((function(t){t&&d++})),d!=this.qualificationsList.length)return this.$refs.uToast.show({type:"default",message:"请上传特殊资质图片"}),!1;this.qualificationsImg&&(this.dataList.qualificationsImg=this.qualificationsImg.join(",")),null===(o=this.dataList.picList)||void 0===o||o.filter((function(t){"0001"==t.document_type?t.document_name="法人身份证":"0011"==t.document_type?t.document_name="身份证反面":"0002"==t.document_type?t.document_name="商户营业执照":"0034"==t.document_type?t.document_name="商户网站/APP截图":"0005"==t.document_type?t.document_name="门头照片":"0015"==t.document_type?t.document_name="室内照片":"0007"==t.document_type?t.document_name="手持身份证自拍照":"0025"==t.document_type?t.document_name="银联卡正面":"0026"==t.document_type&&(t.document_name="银联卡反面")})),this.dataList.regMerType="01",this.dataList.bankAcctType="0",this.dataList.shareHolderType="1",this.dataList.bnfType="1";var c=JSON.parse(JSON.stringify(this.dataList));delete c.isLineLedger,delete c.settleType,this.$request.post("/coc-merchant-app/app/v1/merchantsettledin/preservation",function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){(0,s.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({mobile:t.getStorageSync("mobile")},c)),t.navigateTo({url:"/pages/Settlein/individualInfo?identity=".concat(this.identity,"&settleType=").concat(this.dataList.settleType),success:function(t){t.eventChannel.emit("getinfo",{data:e.dataList})}})}else this.$refs.uToast.show({type:"default",message:"请上传个体工商户入驻资料"})},uploadPictures:function(e,a){var i=this,n=!1,o=this;this.$newrequest.post("/coc-active/api/v1/merchantsettledin/uploadPictures",{img:e}).then((function(e){var s,d;(o.showloading=!1,200==e.code)?(null===(s=i.dataList.picList)||void 0===s||s.filter((function(t,o){t.document_type==a&&(n=!0,i.dataList.picList[o]={document_type:a,file_path:e.data.filePath,file_size:e.data.fileSize})})),n||null===(d=i.dataList.picList)||void 0===d||d.push({document_type:a,file_path:e.data.filePath,file_size:e.data.fileSize})):(t.$u.toast(e.message),o.showloading=!1)}))},getbase64:function(t,e){var a=this;(0,d.pathToBase64)(t).then((function(t){a.uploadPictures(t,e)})).catch((function(t){console.error(t),_this.showloading=!1}))},Onspecialimg:function(e){var a=this;t.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){a.uploadimg(t.tempFilePaths[0],e)}})},OnDoorhead:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){e.showloading=!1,e.dataList.DoorheadImg=t.tempFilePaths[0],e.uploadimg(t.tempFilePaths[0],"doorheadPhoto")}})},Onscreenshot:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){e.showloading=!1,e.dataList.screenshotImg=t.tempFilePaths[0],e.uploadimg(t.tempFilePaths[0],"appScreenshot")}})},handleUpload:function(e){var a=this;t.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){a.uploadimg(t.tempFilePaths[0],e)}})},uploadimg:function(e,a){var i=this,n=this;this.$refs.compress.start(e).then((function(o){e=o,i.showloading=!0,t.uploadFile({url:getApp().globalData.uploadUrl,filePath:e,name:"file",formData:{file:e},header:{"Content-Type":"multipart/form-data"},fail:function(){n.showloading=!1,t.showToast({title:"上传失败",icon:"none"})},success:function(t){console.log(11111111,JSON.parse(t.data).data),n.dataList[a]=JSON.parse(t.data).data,n.qualificationsImg[a]=JSON.parse(t.data).data,"licenseImg"===a&&i.getbase64(e,"0002"),"juridicalIdCardFrontImg"===a&&i.getbase64(e,"0001"),"juridicalIdCardBackImg"===a&&i.getbase64(e,"0011"),"bankImgFront"===a&&i.getbase64(e,"0025"),"bankImgBack"===a&&i.getbase64(e,"0026"),"doorheadPhoto"===a&&1==n.dataList.settleType&&n.getbase64(e,"0005"),"appScreenshot"===a&&1==n.dataList.settleType&&n.getbase64(e,"0034"),"indoorPhotograph"===a&&n.getbase64(e,"0015"),"selfieImg"===a?n.getbase64(e,"0007"):i.showloading=!1}})})).catch((function(){t.$u.toast("图片压缩失败"),i.showloading=!1}))},CardlicenseImg:function(e){var a=this;return(0,o.default)(n.default.mark((function i(){var o,s,d,r;return n.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a.showloading=!0,20==e.detail.reg_num.text.length?a.dataList.shopLic=e.detail.reg_num.text.substring(0,18):17==e.detail.reg_num.text.length?a.dataList.shopLic=e.detail.reg_num.text.substring(0,15):a.dataList.shopLic=e.detail.reg_num.text,a.dataList.shopName=e.detail.enterprise_name.text,a.dataList.shopAddrExt=e.detail.address.text,i.next=6,a.$newrequest.post("/coc-active/api/v1/merchantsettledin/isRepeat",{shopName:a.dataList.shopName});case 6:if(o=i.sent,s=o.code,d=o.message,200===s){i.next=13;break}return t.$u.toast(d),a.showloading=!1,i.abrupt("return");case 13:r=e.detail.image_path,console.log(11111111,r),r&&a.uploadimg(r,"licenseImg");case 16:case"end":return i.stop()}}),i)})))()},handleBankCard:function(t){this.showloading=!0;var e=t.detail,a=e.number,i=e.image_path;this.dataList.bankAcctNo=a.text,console.log(4444444,i),i&&this.uploadimg(i,"bankImgFront")},handleBankImgBack:function(t){console.log(t),this.showloading=!0;var e=t.detail.image_path;console.log(555555,e),e&&this.uploadimg(e,"bankImgBack")},CardBackImg:function(t){this.showloading=!0;var e=t.detail.valid_date.text.substr(t.detail.valid_date.text.lastIndexOf("-")+1,8);e=e.slice(0,4)+"-"+e.slice(4),e=e.slice(0,7)+"-"+e.slice(7),this.dataList.legalCardDeadline=e;var a=t.detail.image_path;console.log(33333333,a),a&&this.uploadimg(a,"juridicalIdCardBackImg")},CardFrontImg:function(t){this.showloading=!0,this.dataList.legalName=t.detail.name.text,this.dataList.legalIdcardNo=t.detail.id.text,this.dataList.legalmanHomeAddr=t.detail.address.text,this.dataList.bankAcctName=t.detail.name.text;var e=t.detail.image_path;console.log(22222222,e),e&&this.uploadimg(e,"juridicalIdCardFrontImg")}}};e.default=c}).call(this,a("543d")["default"])},"7f7e":function(t,e,a){},a5dd:function(t,e,a){},b101:function(t,e,a){"use strict";(function(t,e){var i=a("4ea4");a("76b1");i(a("66fd"));var n=i(a("5fed"));t.__webpack_require_UNI_MP_PLUGIN__=a,e(n.default)}).call(this,a("bc2e")["default"],a("543d")["createPage"])},e993:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={uForm:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-form/u-form")]).then(a.bind(null,"cf22"))},uFormItem:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-form-item/u-form-item")]).then(a.bind(null,"ee1b"))},"u-Input":function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u--input/u--input")]).then(a.bind(null,"c00c"))},uRadioGroup:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-radio-group/u-radio-group")]).then(a.bind(null,"8f9f"))},uRadio:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-radio/u-radio")]).then(a.bind(null,"37f9"))},uToast:function(){return a.e("uni_modules/uview-ui/components/u-toast/u-toast").then(a.bind(null,"1b13"))},uLoadingPage:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-loading-page/u-loading-page")]).then(a.bind(null,"e325"))},uPopup:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(a.bind(null,"8add"))},uIcon:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(a.bind(null,"0f14"))}},n=function(){var t=this,e=t.$createElement,a=(t._self._c,t.qualificationsList.length);t._isMounted||(t.e0=function(e){t.mccshow=!1},t.e1=function(e,a){var i=arguments[arguments.length-1].currentTarget.dataset,n=i.eventParams||i["event-params"];a=n.index;t.currentmcc=a}),t.$mp.data=Object.assign({},{$root:{g0:a}})},o=[]}},[["b101","common/runtime","common/vendor","pages/Settlein/common/vendor"]]]);