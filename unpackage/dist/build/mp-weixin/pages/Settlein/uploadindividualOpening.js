require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Settlein/uploadindividualOpening"],{"166d":function(t,e,n){"use strict";n.r(e);var i=n("5b91"),a=n("49f3");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("82f7");var s=n("f0c5"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=u.exports},"49f3":function(t,e,n){"use strict";n.r(e);var i=n("5050"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},5050:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("b1ac"),a={components:{},data:function(){return{showloading:!1,checkboxValue1:[],agree:!1,dataList:{picList:[],bankImgFront:"",bankImgBack:"",selfieImg:""},showagreement:!1,timeData:{},isfinish:!1,isshow:!0}},onLoad:function(e){var n=this,i=this.getOpenerEventChannel();i.on("getinfo",(function(e){t.$u.sleep(0).then((function(){n.dataList=e.data}))})),1==e.isshow&&(this.isshow=!1,t.setNavigationBarTitle({title:"经营者银行卡及手持身份证自拍照查看"}),this.getList())},onShow:function(){},computed:{getselfieImg:function(){if(this.dataList.selfieImg)return this.dataList.selfieImg},getbankImgBack:function(){if(this.dataList.bankImgBack)return this.dataList.bankImgBack},getbankImgFront:function(){if(this.dataList.bankImgFront)return this.dataList.bankImgFront}},methods:{OnholdImg:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){e.uploadimg(t.tempFilePaths[0],"selfieImg"),e.getbase64(t.tempFilePaths[0],"0007")}})},OnBankBackImg:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){e.uploadimg(t.tempFilePaths[0],"bankImgBack"),e.getbase64(t.tempFilePaths[0],"0026")}})},OnBankImg:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){e.uploadimg(t.tempFilePaths[0],"bankImgFront"),e.getbase64(t.tempFilePaths[0],"0025")}})},getList:function(){var t=this;this.$request.post("/coc-active/api/v1/merchantsettledin/dataEcho",{echoType:"3"}).then((function(e){t.dataList={bankImgFront:e.data.featuredMaterials.bankImgFront,bankImgBack:e.data.featuredMaterials.bankImgBack,selfieImg:e.data.featuredMaterials.selfieImg}}))},Onqianshu:function(){if(!this.isfinish)return!1;this.showagreement=!1,this.agree=!0},Onfinish:function(){this.isfinish=!0},onChange:function(t){this.timeData=t},OnPushCooperation:function(){this.isfinish||this.$refs.countDown.start(),this.showagreement=!0},OnChangecheckboxValue1:function(e){1==e.length&&t.$u.toast("请点击《商家合作协议》签署协议")},corporatePayment:function(e){var n=this,i=this;console.log(this.dataList),1==this.dataList.isLineLedger?this.$request.post("/coc-active/api/v1/merchantsettledin/corporatePayment",{umsRegId:e,companyAccount:this.dataList.bankAcctNo}).then((function(e){n.$refs.uToast.show({type:"success",message:"上传成功，请等待审核成功后认证",complete:function(){this.showloa14ding=!1,t.navigateTo({url:"/pages/Settlein/individualProgress?type=1&isLineLedger="+i.dataList.isLineLedger})}})})):this.$refs.uToast.show({type:"success",message:"上传成功，请等待审核成功后认证",complete:function(){this.showloa14ding=!1,t.navigateTo({url:"/pages/Settlein/individualProgress?type=1&isLineLedger="+i.dataList.isLineLedger})}})},OnAdd:function(){var e=this,n=this;return 1==this.dataList.isLineLedger&&0==this.checkboxValue1.length?(t.$u.toast("请确认阅读并同意商务隐私政策"),!1):1!=this.dataList.isLineLedger||this.agree?(this.dataList.picList.filter((function(t){"0006"==t.document_type?t.document_name="开户许可证（企业商户必传)":"0007"==t.document_type?t.document_name="手持身份证自拍照":"0025"==t.document_type?t.document_name="银行卡正面照":"0026"==t.document_type&&(t.document_name="银行卡背面照")})),this.showloading=!0,void this.$request.post("/coc-active/api/v1/merchantsettledin/dataUpload",this.dataList).then((function(t){200==t.code?e.corporatePayment(t.data):e.$refs.uToast.show({message:t.message})}))):(this.$refs.uToast.show({type:"default",message:"请签署商务隐私政策",complete:function(){n.showagreement=!0,n.$refs.countDown.start()}}),!1)},uploadPictures:function(t,e){var n=this;this.showloading=!0;var i=!1;this.$newrequest.post("/coc-active/api/v1/merchantsettledin/uploadPictures",{img:t}).then((function(t){n.dataList.picList.filter((function(a,o){a.document_type==e&&(i=!0,n.dataList.picList[o]={document_type:e,file_path:t.data.filePath,file_size:t.data.fileSize})})),i||n.dataList.picList.push({document_type:e,file_path:t.data.filePath,file_size:t.data.fileSize}),n.showloading=!1}))},getbase64:function(t,e){var n=this;(0,i.pathToBase64)(t).then((function(t){n.uploadPictures(t,e)})).catch((function(t){console.error(t)}))},uploadimg:function(e,n){var i=this;t.uploadFile({url:getApp().globalData.uploadUrl,filePath:e,name:"file",formData:{file:e},header:{"Content-Type":"multipart/form-data"},success:function(t){"bankImgFront"==n?i.dataList.bankImgFront=JSON.parse(t.data).data:"bankImgBack"==n?i.dataList.bankImgBack=JSON.parse(t.data).data:"selfieImg"==n&&(i.dataList.selfieImg=JSON.parse(t.data).data)}})}}};e.default=a}).call(this,n("543d")["default"])},"5b91":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uCheckboxGroup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-checkbox-group/u-checkbox-group")]).then(n.bind(null,"55a7"))},uCheckbox:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-checkbox/u-checkbox")]).then(n.bind(null,"f125"))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,"8add"))},uCountDown:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-count-down/u-count-down")]).then(n.bind(null,"cda7"))},uLoadingPage:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-loading-page/u-loading-page")]).then(n.bind(null,"e325"))},uToast:function(){return n.e("uni_modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,"1b13"))}},a=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.showagreement=!1})},o=[]},7316:function(t,e,n){"use strict";(function(t,e){var i=n("4ea4");n("76b1");i(n("66fd"));var a=i(n("166d"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"82f7":function(t,e,n){"use strict";var i=n("8510"),a=n.n(i);a.a},8510:function(t,e,n){}},[["7316","common/runtime","common/vendor","pages/Settlein/common/vendor"]]]);