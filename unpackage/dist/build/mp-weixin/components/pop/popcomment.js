(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/pop/popcomment"],{"0c23":function(e,t,n){"use strict";n.r(t);var i=n("3225"),o=n("f89d");for(var s in o)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(s);n("8447");var u=n("f0c5"),a=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=a.exports},3225:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i}));var i={uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,"076f"))},"u-Textarea":function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u--textarea/u--textarea")]).then(n.bind(null,"a746"))},uUpload:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-upload/u-upload")]).then(n.bind(null,"8f994"))},uToast:function(){return n.e("uni_modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,"4bf8"))}},o=function(){var e=this.$createElement;this._self._c},s=[]},"70a5":function(e,t,n){"use strict";(function(e){var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("2eee")),s=i(n("9523")),u=i(n("c973"));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={components:{},data:function(){return{isend:!0,fileList:[],value:"",imgs:""}},props:{type:{type:String,default:!1},showload:{type:Boolean,default:!1},showcomment:{type:Boolean,default:!1},chosecomment:{type:Object,default:function(){return{}}}},onLoad:function(){},onShow:function(){},methods:{afterRead:function(e){var t=this;return(0,u.default)(o.default.mark((function n(){var i,s,u,a;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=[].concat(e.file),i.map((function(e,n){t.fileList.push(r(r({},e),{},{status:"uploading",message:"上传中",uploadstatus:!1}))})),s=0;case 3:if(!(s<t.fileList.length)){n.next=16;break}if(u=t.fileList[s],"uploading"!==u.status||t.fileList[s].uploadstatus){n.next=13;break}return t.fileList[s].uploadstatus=!0,n.next=9,t.uploadFilePromise(u.url);case 9:a=n.sent,t.fileList[s].url=a,t.fileList[s].status="success",t.fileList[s].message="";case 13:s++,n.next=3;break;case 16:case"end":return n.stop()}}),n)})))()},uploadFilePromise:function(t){return new Promise((function(n,i){e.uploadFile({url:getApp().globalData.uploadUrl,filePath:t,name:"file",formData:{user:"test"},success:function(e){setTimeout((function(){n(JSON.parse(e.data).data)}),0)}})}))},deletePic:function(e){this.fileList.splice(e.index,1)},submitcomments:function(){var e=this;if(!this.isend)return!1;this.isend=!1,this.fileList.length>0&&(this.imgs=this.fileList[0].url),this.imgs?this.imgs=[this.imgs]:this.imgs=null;var t="";t=1==this.type?"/coc-social/api/v2/article/comment":"/coc-active/api/v1/marvellous_activity/comment",this.$request.post(t,{commentType:this.chosecomment.commentType,relName:this.chosecomment.title?this.chosecomment.title:this.chosecomment.name,content:this.value,imgs:this.imgs,id:this.chosecomment.id}).then((function(t){200==t.code?(e.isend=!0,e.value="",e.fileList=[],e.imgs="",e.$emit("submitcomments")):(e.isend=!0,e.$refs.uToast.show({message:t.message}))}))},close:function(){this.$emit("closepopcomment")}}};t.default=c}).call(this,n("543d")["default"])},"82ff":function(e,t,n){},8447:function(e,t,n){"use strict";var i=n("82ff"),o=n.n(i);o.a},f89d:function(e,t,n){"use strict";n.r(t);var i=n("70a5"),o=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/pop/popcomment-create-component',
    {
        'components/pop/popcomment-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("0c23"))
        })
    },
    [['components/pop/popcomment-create-component']]
]);
